<app-container [title]="title" [isDefault]="pageNum==1" (headerReturn)="headerReturn()">
    <!-- 虛擬群組維護 -->
    <div [hidden]="pageNum != 1">
        <form [formGroup]="form" (ngSubmit)="submitForm()">
            <div class="form-group row">
                <div class="col-3 col-xl-3 col-lg-3">
                    <label for="groupkeyword">{{'keyword_search'|translate}}</label>
                    <input type="text" class="form-control" id="groupkeyword" formControlName="groupkeyword"
                        placeholder="{{'virtul_group_name'|translate}}、{{'virtul_group_alias'|translate}}">
                </div>
                <div class="col-3 col-xl-3 col-lg-3">
                    <label for="groupAuthoritiesID">{{'authorities'|translate}}</label>
                    <div class="ui-inputgroup">
                        <input type="text" class="form-control" formControlName="groupAuthoritiesID"
                            placeholder="{{'authorities'|translate}}">
                        <button pButton type="button" icon="pi pi-search" class="ml-1 tpi-night"
                            (click)="queryAuthoritiesList();"></button>
                    </div>
                </div>
                <div class="col-3 col-xl-3 col-lg-3">
                    <label for="securityLevelID">{{'security_level'|translate}}</label>
                    <div style="display:block">
                        <p-dropdown [options]="securityLevels" [showClear]="true" placeholder="{{'plz_chs'| translate}}"
                            formControlName="securityLevelID" [style]="{'width':'100%','z-index':'1000'}"></p-dropdown>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-12 col-xl-12 col-lg-12">
                    <button type="submit" class="btn tpi-btn tpi-primary float-left mr-3">{{'button.search'|translate}}</button>
                    <button type="button" class="btn tpi-btn tpi-second float-right" (click)="create()">
                        {{'button.virtual_group'|translate}}
                    </button>
                </div>
            </div>
        </form>
        <hr>
        <p-table *ngIf="cols" [columns]="cols" [value]="data" selectionMode="single" responsiveLayout="scroll"
                  styleClass="p-datatable-striped"
            [style]="{'word-break':'break-word'}">
            <ng-template pTemplate="colgroup" let-columns>
                <colgroup>
                    <col *ngFor="let col of columns" [style.width]="col.width">
                </colgroup>
                <colgroup style="width:320px;">{{'action'|translate}}</colgroup>
            </ng-template>
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th *ngFor="let col of columns" scope="col" >
                        {{col.header}}
                    </th>
                    <th style="width:320px;" scope="col">{{'action'|translate}}</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-columns="columns">
                <!-- [pSelectableRow]="rowData" 控制高亮 -->
                <tr>
                    <td *ngFor="let col of columns">
                        <div *ngIf="col.field == 'vgroupName'">
                            <span>{{rowData['vgroupName']}}</span>
                        </div>
                        <div *ngIf="col.field == 'vgroupAuthorities'">
                            <span>{{rowData['vgroupAuthorities']}}</span>
                            <!-- <label *ngFor="let item of rowData[col.field];let i = index">
                                {{item.groupAuthoritieName}}
                                <span *ngIf="rowData[col.field].length > 1 && (i+1) != rowData[col.field].length">，</span>
                            </label> -->
                        </div>
                        <span *ngIf="col.field == 'vgroupDesc'">
                            {{ rowData[col.field] }}
                            <a *ngIf="rowData['oriVgroupDesc'] && rowData[col.field] != rowData['oriVgroupDesc']" href="javascript:void(0)"
                                pTooltip="{{rowData['oriVgroupDesc']}}"
                                (click)="copyInfoMsg(rowData['oriVgroupDesc']);">{{'show_more'|translate}}</a>
                        </span>
                        <div *ngIf="col.field != 'vgroupName' && col.field != 'vgroupAuthorities' && col.field != 'vgroupDesc'">
                            <span>{{ col.type ? col.type.transform(rowData[col.field]) : rowData[col.field] }}</span>
                        </div>
                    </td>
                    <td style="text-align: center;width: 320px">
                      <button pButton pRipple type="button" icon="pi pi-eye"
                              class="p-button-rounded p-button-text p-button-plain" (click)="showDialog(rowData,formOperate.detail)"
                              [pTooltip]="'button.detail' | translate" tooltipPosition="top"></button>

                      <button pButton pRipple type="button" icon="fa fa-edit"
                              class="p-button-rounded p-button-text p-button-plain" (click)="showDialog(rowData,formOperate.update)"
                              [pTooltip]="'button.update' | translate" tooltipPosition="top"></button>

                      <button pButton pRipple type="button" icon="fa fa-trash-alt"
                              class="p-button-rounded p-button-text p-button-plain" (click)="showDialog(rowData,formOperate.delete)"
                              [pTooltip]="'button.delete' | translate" tooltipPosition="top"></button>
                        <!-- <div class="btn-group">
                            <button type="button" class="btn btn-deta mr-5"
                                (click)="showDialog(rowData,formOperate.detail)">
                                <span class="fa fa-search">{{'button.detail'|translate}}</span>
                            </button>
                            <button type="button" class="btn btn-deta mr-5"
                                (click)="showDialog(rowData,formOperate.update)">
                                <span class="fa fa-edit">{{'button.update'|translate}}</span>
                            </button>
                            <button type="button" class="btn btn-deta" (click)="showDialog(rowData,formOperate.delete)">
                                <span class="fa fa-trash">{{'button.delete'|translate}}</span>
                            </button>
                        </div> -->
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="footer" let-columns>
                <tr *ngIf="rowcount">
                    <td [attr.colspan]="columns.length+1" style="color: #b7b7b7;">
                        <span>{{'row_count' | translate}}: {{rowcount}}</span>
                        <!-- <button type="button" class="btn btn-warning pull-right ml-3"
                            (click)="moreData();">{{'button.more'|translate}}</button> -->

                            <!-- 查詢更多 -->
                            <button  type="button" class="btn tpi-header-return" (click)="moreData()">{{ 'button.more'| translate}}
                            <i class="fas fa-angle-double-right" style="margin-left: 5px;"></i>
                            </button>
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage" let-columns>
                <tr>
                    <td [attr.colspan]="columns.length+1">
                        {{'no_rec' | translate}}
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
    <!-- 虛擬群組維護 > 授權核身加入 -->
    <div [hidden]="pageNum != 2">
        <form [formGroup]="form_page2" (ngSubmit)="queryauthorities()">
            <div class="form-group row col-auto">
                <!-- <div class="col-3 col-xl-3 col-lg-3">
                    <label for="authoritieskeyword">{{'keyword_search'|translate}}</label>
                    <input type="text" class="form-control" id="authoritieskeyword" formControlName="authoritieskeyword"
                        placeholder="{{'group_auth_id'|translate}}、{{'group_auth_name'|translate}}、{{'group_auth_desc'|translate}}">
                </div> -->

                <span class="p-input-icon-right" style="width:40vw">
                  <i class="pi pi-search tpi-i-search" (click)="queryauthorities();"></i>
                  <input type="search" class="form-control tpi-i-input" id="authoritieskeyword" formControlName="authoritieskeyword"
                         placeholder="{{'group_auth_id'|translate}}、{{'group_auth_name'|translate}}、{{'group_auth_desc'|translate}}">
                </span>
            </div>
            <!-- <div class="form-group row">
                <div class="col-12 col-xl-12 col-lg-12">
                    <button type="submit" class="btn tpi-btn tpi-primary float-left mr-3">{{'button.search'|translate}}</button>
                </div>
            </div> -->
        </form>
        <hr>
        <p-table *ngIf="colsAuthorities" [columns]="colsAuthorities" [value]="dataAuthorities" selectionMode="single" styleClass="p-datatable-striped"
            [style]="{'word-break':'break-word'}" [(selection)]="selected">
            <ng-template pTemplate="colgroup" let-columns>
                <colgroup>
                    <col style="width: 2.25em">

                    <col *ngFor="let col of columns" [style.width]="col.width">
                </colgroup>
            </ng-template>
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th style="width: 2.25em" scope="col">
                        <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                    </th>
                    <th *ngFor="let col of columns" scope="col">
                        {{col.header}}
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-columns="columns">
                <!-- [pSelectableRow]="rowData" 控制高亮 -->
                <tr>
                    <td style="width: 2.25em">
                        <p-tableCheckbox [value]="rowData"></p-tableCheckbox>
                    </td>
                    <td *ngFor="let col of columns">
                        <span>{{rowData[col.field]}}</span>
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="footer" let-columns>
                <tr *ngIf="rowcount_Authorities">
                    <td [attr.colspan]="columns.length+1">{{'row_count' | translate}}: {{rowcount_Authorities}}</td>
                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage" let-columns>
                <tr>
                    <td [attr.colspan]="columns.length+1">
                        {{'no_rec' | translate}}
                    </td>
                </tr>
            </ng-template>
        </p-table>
        <div class="form-group row mt-2">
            <div class="col-12 col-lg-12">
                <button type="button" class="btn tpi-btn tpi-primary float-left mr-3" [disabled]="form.invalid"
                    (click)="chooseAuthorities();">{{'button.add'|translate}}</button>
                <button type="button" class="btn tpi-btn tpi-primary float-left"
                    (click)="return_to_list();">{{'button.return_to_list'|translate}}</button>
            </div>
        </div>
    </div>
    <!-- 虛擬群組維護 > 動作 > 查詢 -->
    <div [hidden]="pageNum != 3">
        <form [formGroup]="form_page3">
            <!-- <form *ngIf="form_page3" > -->
            <div class="form-group row">
                <!-- <div class="col-sm-4">
                    <label>{{'group_id'|translate}}</label>

                    <label class="form-control border-line">{{form_page3.value.groupID}}</label>
                </div> -->
                <div class="col-sm-6">
                    <label>{{'virtul_group_name'|translate}}</label>
                    <label class="form-control border-line">{{form_page3.value.groupName | string_length:20}}
                        <a *ngIf="form_page3.value.groupName && form_page3.value.groupName.length > 20"
                            href="javascript:void(0)" pTooltip="{{form_page3.value.groupName}}"
                            tooltipZIndex="10000">{{'show_more'|translate}}</a>
                    </label>
                </div>
                <div class="col-sm-6">
                    <label>{{'virtul_group_alias'|translate}}</label>
                    <label class="form-control border-line">{{form_page3.value.groupAlias | string_length:20}}
                        <a *ngIf="form_page3.value.groupAlias && form_page3.value.groupAlias.length > 20"
                            href="javascript:void(0)" pTooltip="{{form_page3.value.groupAlias}}"
                            tooltipZIndex="10000">{{'show_more'|translate}}</a>
                    </label>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label>{{'allow_access_days'|translate}} (0: {{'unlimited'|translate}})</label>
                    <label class="form-control border-line">{{form_page3.value._allowAccessDays}}</label>
                </div>
                <div class="col-sm-6">
                    <label>{{'allow_access_use_times'|translate}} (0: {{'unlimited'|translate}})</label>
                    <label class="form-control border-line">{{form_page3.value.allowAccessUseTimes}}</label>
                </div>
            </div>
            <div class="form-group row">
                <!-- <div class="col-sm-4">
                    <label>{{'group_access_method'|translate}}</label>
                    <label class="form-control border-line">{{form_page3.value.groupAccess}}</label>
                </div> -->
                <div class="col-sm-6">
                    <label>{{'authorities'|translate}}</label>
                    <label class="form-control border-line">{{form_page3.value.groupAuthoritiesName}}</label>
                </div>
                <div class="col-sm-6">
                    <label>{{'security_level'|translate}}</label>
                    <label class="form-control border-line">{{form_page3.value.securityLevelName}}</label>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-12">
                    <label>{{'virtul_group_desc'|translate}}</label>
                    <textarea class="form-control" rows="2" style="resize: none;"
                        [innerHtml]="form_page3.value.groupDesc" autoResize="autoResize"></textarea>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label>{{'create_date'|translate}}</label>
                    <label class="form-control border-line">{{form_page3.value.createDate}}</label>
                </div>
                <div class="col-sm-6">
                    <label>{{'create_by'|translate}}</label>
                    <label class="form-control border-line">{{form_page3.value.createUser}}</label>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label>{{'update_date'|translate}}</label>
                    <label class="form-control border-line">{{form_page3.value.updateDate}}</label>
                </div>
                <div class="col-sm-6">
                    <label>{{'update_user'|translate}}</label>
                    <label class="form-control border-line">{{form_page3.value.updateUser}}</label>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label>{{'module_list'|translate}}</label>
                    <p-listbox #data_0235Listbox [style]="{'width': '105%', 'font-size': '20px'}" [options]="data_0235"
                        [(ngModel)]="selectedAPI_key" [ngModelOptions]="{standalone: true}" [filter]="true"
                        filterValue="" (click)="showDialog_APIList(selectedAPI_key)"></p-listbox>
                </div>
                <div class="col-sm-8">
                    <label>{{'api_list'|translate}}</label>
                    <p-listbox #data_APIListListbox [style]="{'width': '100%', 'font-size': '20px'}"
                        [options]="data_APIList" [filter]="true"></p-listbox>
                </div>
            </div>
        </form>
        <div class="form-group row">
            <div class="col-12 col-lg-12">
                <button type="button" class="btn tpi-btn tpi-primary float-left"
                    (click)="return_to_list();">{{'button.return_to_list'|translate}}</button>
            </div>
        </div>
    </div>
    <!-- 虛擬群組維護 > 動作 > 更新 -->
    <div [hidden]="pageNum != 4">
        <form [formGroup]="form_page4" (ngSubmit)="submitForm_page4()">
            <!-- <div class="form-group row"> -->
                <!-- <div class="col-sm-4">
                    <label id="groupID_label">{{'group_id'|translate}}</label>

                    <label class="form-control border-line">{{form_page4.value.groupID}}</label>
                </div>
                <div class="col-sm-4">
                    <label>{{'virtul_group_name'|translate}}</label>
                    <label class="form-control border-line">{{form_page4.value.groupName_page4 | string_length:20}}
                        <a *ngIf="form_page4.value.groupName_page4 && form_page4.value.groupName_page4.length > 20"
                            href="javascript:void(0)" pTooltip="{{form_page4.value.groupName_page4}}"
                            tooltipZIndex="10000">{{'show_more'|translate}}</a>
                    </label>
                </div>
                <div class="col-sm-4">
                    <label>{{'virtul_group_alias'|translate}}</label>
                    <label class="form-control border-line">{{form_page4.value.groupAlias_page4 | string_length:20}}
                        <a *ngIf="form_page4.value.groupAlias_page4 && form_page4.value.groupAlias_page4.length > 20"
                            href="javascript:void(0)" pTooltip="{{form_page4.value.groupAlias_page4}}"
                            tooltipZIndex="10000">{{'show_more'|translate}}</a>
                    </label>
                </div> -->
            <!-- </div> -->
            <div class="form-group row">
                <div class="col-6">
                    <label id="vgroupName_page4_label" for="groupName" class="control-label">
                        {{'virtul_group_name'|translate}}
                    </label>
                    <label class="form-control border-line">{{groupName_page4?.value}}</label>
                    <!-- <input type="text" class="form-control" id="groupName" formControlName="groupName_page4"
                        placeholder="{{'new_virtul_group_name'|translate}}">
                    <div *ngIf="groupName_page4?.invalid && (groupName_page4?.dirty || groupName_page4?.touched)" class="text-danger">
                        <small class="form-text">{{groupName_page4.errors.isRequired}}</small>
                        <small class="form-text">{{groupName_page4.errors.maxlength | translate}}</small>
                        <small class="form-text">{{groupName_page4.errors.minlength | translate}}</small>
                        <small class="form-text">{{groupName_page4.errors.pattern}}</small>
                    </div> -->
                </div>
                <div class="col-6">
                    <label id="vgroupAlias_page4_label" for="groupAlias"
                        class="control-label">{{'virtul_group_alias'|translate}}</label>
                    <input type="text" class="form-control" id="groupAlias" formControlName="groupAlias_page4"
                        placeholder="{{'new_virtul_group_alias'|translate}}">
                    <div *ngIf="groupAlias_page4?.invalid && (groupAlias_page4?.dirty || groupAlias_page4?.touched)" class="text-danger">
                        <small class="form-text">{{groupAlias_page4.errors.isRequired}}</small>
                        <small class="form-text">{{groupAlias_page4.errors.maxlength | translate}}</small>
                        <small class="form-text">{{groupAlias_page4.errors.minlength | translate}}</small>
                        <small class="form-text">{{groupAlias_page4.errors.pattern}}</small>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-6">
                    <label id="allowAccessDays_page4_label" for="allowAccessDays" class="control-label">
                        {{'allow_access_days'|translate}} (0: {{'unlimited'|translate}})
                    </label>
                    <div class="row">
                        <div class="col-8" style="padding-right: 5px;">
                            <input type="number" class="form-control" id="allowAccessDays"
                                formControlName="allowAccessDays_page4" min="0" onkeyup="this.value=Math.round(this.value)"
                                onafterpaste="this.value=Math.round(this.value)">
                            <div *ngIf="allowAccessDays_page4?.invalid && (allowAccessDays_page4?.dirty || allowAccessDays_page4?.touched)"
                                class="text-danger">
                                <small class="form-text">{{allowAccessDays_page4.errors.isRequired}}</small>
                                <small class="form-text">{{allowAccessDays_page4.errors.maxlength | translate}}</small>
                                <small class="form-text">{{allowAccessDays_page4.errors.minlength | translate}}</small>
                                <small class="form-text">{{allowAccessDays_page4.errors.pattern}}</small>
                            </div>
                        </div>
                        <div class="col-4" style="padding-left: 0px;">
                            <p-dropdown [options]="dayOptions" formControlName="dayOptionsName_page4"
                                placeholder="{{'plz_chs' | translate}}" [style]="{'width':'100%'}">
                            </p-dropdown>
                            <div *ngIf="dayOptionsName_page4?.invalid && (dayOptionsName_page4?.dirty || dayOptionsName_page4?.touched)"
                                class="text-danger">
                                <small class="form-text">{{dayOptionsName_page4.errors.isRequired}}</small>
                                <small class="form-text">{{dayOptionsName_page4.errors.maxlength | translate}}</small>
                                <small class="form-text">{{dayOptionsName_page4.errors.minlength | translate}}</small>
                                <small class="form-text">{{dayOptionsName_page4.errors.pattern}}</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <label id="allowAccessUseTimes_page4_label" for="allowAccessUseTimes" class="control-label">
                        {{'allow_access_use_times'|translate}} (0: {{'unlimited'|translate}})
                    </label>
                    <input type="number" class="form-control" id="allowAccessUseTimes"
                        formControlName="allowAccessUseTimes_page4" min="0" onkeyup="this.value=Math.round(this.value)"
                        onafterpaste="this.value=Math.round(this.value)">
                    <div *ngIf="allowAccessUseTimes_page4?.invalid && (allowAccessUseTimes_page4?.dirty || allowAccessUseTimes_page4?.touched)"
                        class="text-danger">
                        <small class="form-text">{{allowAccessUseTimes_page4.errors.isRequired}}</small>
                        <small class="form-text">{{allowAccessUseTimes_page4.errors.maxlength | translate}}</small>
                        <small class="form-text">{{allowAccessUseTimes_page4.errors.minlength | translate}}</small>
                        <small class="form-text">{{allowAccessUseTimes_page4.errors.pattern}}</small>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-6">
                    <label for="groupAuthorities" class="control-label">{{'authorities'|translate}}</label>
                    <div class="ui-inputgroup">
                        <input type="text" class="form-control" formControlName="groupAuthoritiesName"
                            placeholder="{{'authorities'|translate}}">
                        <button pButton type="button" icon="pi pi-search" class="ml-1 tpi-night"
                            (click)="queryAuthoritiesList_page4();"></button>
                    </div>
                </div>
                <div class="col-6">
                    <label id="securityLevelName_page4_label" for="securityLevel"
                        class="control-label">{{'security_level'|translate}}</label>
                    <div style="display:block">
                        <p-dropdown [options]="new_securityLevels" [filter]="true" [baseZIndex]="10000" appendTo="body"
                            placeholder="{{'plz_chs'| translate}}" formControlName="securityLevelName_page4"
                            [style]="{'width':'100%','z-index':'1000'}">
                        </p-dropdown>
                        <div *ngIf="securityLevelName_page4?.invalid && (securityLevelName_page4?.dirty || securityLevelName_page4?.touched)"
                            class="text-danger">
                            <small class="form-text">{{securityLevelName_page4.errors.isRequired}}</small>
                            <small class="form-text">{{securityLevelName_page4.errors.maxlength | translate}}</small>
                            <small class="form-text">{{securityLevelName_page4.errors.minlength | translate}}</small>
                            <small class="form-text">{{securityLevelName_page4.errors.pattern}}</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-12">
                    <label id="vgroupDesc_page4_label" for="groupDesc" class="control-label">{{'virtul_group_desc'|translate}}</label>
                    <div>
                        <textarea class="form-control" rows="2" formControlName="groupDesc_page4"></textarea>
                        <div *ngIf="groupDesc_page4?.invalid && (groupDesc_page4?.dirty || groupDesc_page4?.touched)" class="text-danger">
                            <small class="form-text">{{groupDesc_page4.errors.isRequired}}</small>
                            <small class="form-text">{{groupDesc_page4.errors.maxlength | translate}}</small>
                            <small class="form-text">{{groupDesc_page4.errors.minlength | translate}}</small>
                            <small class="form-text">{{groupDesc_page4.errors.pattern}}</small>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group row">
                <div class="col-12">
                    <label for="moduleList" class="control-label mr-3">{{'module_list'|translate}}</label>
                    <button type="button" class="btn tpi-primary"
                        (click)="Choose_Module();">{{'button.chs_module'|translate}}</button>
                </div>
            </div>
            <p-table *ngIf="colsModuleList" [columns]="colsModuleList" [value]="data_0235_page4" selectionMode="single" styleClass="p-datatable-striped"
                [style]="{'word-break':'break-word'}" [(selection)]="selected">
                <ng-template pTemplate="colgroup" let-columns>
                    <colgroup>
                        <col *ngFor="let col of columns" [style.width]="col.width">
                    </colgroup>
                </ng-template>
                <ng-template pTemplate="header" let-columns>
                    <tr>
                        <th *ngFor="let col of columns" scope="col">
                            {{col.header}}
                        </th>
                        <th style="width:300px;" scope="col">{{'action'|translate}}</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowData let-columns="columns">
                    <!-- [pSelectableRow]="rowData" 控制高亮 -->
                    <tr>
                        <td *ngFor="let col of columns">
                            <span>{{rowData[col.field]}}</span>
                        </td>
                        <td style="text-align: center;width: 320px">
                            <div class="btn-group">
                                <button type="button" class="btn tpi-primary" (click)="Choose_API(rowData)">
                                    <span class="fa fa-edit">{{'button.chs_api'|translate}}</span>
                                </button>
                            </div>
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage" let-columns>
                    <tr>
                        <td [attr.colspan]="columns.length+1">
                            {{'no_rec' | translate}}
                        </td>
                    </tr>
                </ng-template>
            </p-table>

            <div class="form-group row mt-2">
                <div class="col-12 col-lg-12">
                    <button type="submit" class="btn tpi-btn tpi-primary float-left mr-3" [disabled]="form_page4.invalid">{{'button.update'|translate}}</button>
                    <button type="button" class="btn tpi-btn tpi-primary float-left"
                        (click)="return_to_list();">{{'button.return_to_list'|translate}}</button>
                </div>
            </div>
        </form>

    </div>
    <!-- 虛擬群組維護 > 動作 > 更新 > 授權核身加入 -->
    <div [hidden]="pageNum != 5">
        <form [formGroup]="form_page5" (ngSubmit)="queryauthorities_page4()">
            <div class="form-group row col-auto">
                <!-- <div class="col-3 col-xl-3 col-lg-3">
                    <label for="authoritieskeyword">{{'keyword_search'|translate}}</label>
                    <input type="text" class="form-control" id="authoritieskeyword" formControlName="authoritieskeyword"
                        placeholder="{{'group_auth_id'|translate}}、{{'group_auth_name'|translate}}、{{'group_auth_desc'|translate}}">
                </div> -->
                <span class="p-input-icon-right" style="width:40vw">
                  <i class="pi pi-search tpi-i-search" (click)="queryauthorities_page4();"></i>
                  <input type="search" class="form-control tpi-i-input" id="authoritieskeyword" formControlName="authoritieskeyword"
                  placeholder="{{'group_auth_id'|translate}}、{{'group_auth_name'|translate}}、{{'group_auth_desc'|translate}}">
                </span>
            </div>
            <!-- <div class="form-group row">
                <div class="col-12 col-xl-12 col-lg-12">
                    <button type="submit" class="btn tpi-btn tpi-primary float-left mr-3">{{'button.search'|translate}}</button>
                </div>
            </div> -->
        </form>
        <hr>
        <p-table *ngIf="colsAuthorities" [columns]="colsAuthorities" [value]="dataAuthorities_page4" styleClass="p-datatable-striped"
            selectionMode="single" [style]="{'word-break':'break-word'}" [(selection)]="selected_page4">
            <ng-template pTemplate="colgroup" let-columns>
                <colgroup>
                    <col style="width: 2.25em">
                    <col *ngFor="let col of columns" [style.width]="col.width">
                </colgroup>
            </ng-template>
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th style="width: 2.25em" scope="col">
                        <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                    </th>
                    <th *ngFor="let col of columns" scope="col">
                        {{col.header}}
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-columns="columns">
                <!-- [pSelectableRow]="rowData" 控制高亮 -->
                <tr>
                    <td style="width: 2.25em">
                        <p-tableCheckbox [value]="rowData"></p-tableCheckbox>
                    </td>
                    <td *ngFor="let col of columns">
                        <span>{{rowData[col.field]}}</span>
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="footer" let-columns>
                <tr *ngIf="rowcount_Authorities_page4">
                    <td [attr.colspan]="columns.length+1">{{'row_count' | translate}}: {{rowcount_Authorities_page4}}
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage" let-columns>
                <tr>
                    <td [attr.colspan]="columns.length+1">
                        {{'no_rec' | translate}}
                    </td>
                </tr>
            </ng-template>
        </p-table>
        <div class="form-group row mt-2">
            <div class="col-12 col-lg-12">
                <button type="button" class="btn tpi-btn tpi-primary float-left mr-3" [disabled]="form.invalid"
                    (click)="chooseAuthorities_page4();">{{'button.add'|translate}}</button>
                <button type="button" class="btn tpi-btn tpi-primary float-left"
                    (click)="return_to_list_page4();">{{'button.return_to_list'|translate}}</button>
            </div>
        </div>
    </div>
    <!-- 虛擬群組維護 > 動作 > 更新 > 選擇API -->
    <div [hidden]="pageNum != 6">
        <div class="form-group row">
            <div class="col-sm-5">
                <form [formGroup]="form_page6" (ngSubmit)="call_0234()">
                    <div class="row" style="margin-bottom: 4px;">
                        <div class="col-4 col-xl-4 col-lg-4">
                            <label for="groupkeyword">{{'keyword_search'|translate}}</label>
                            <input type="text" class="form-control" id="groupkeyword" formControlName="groupkeyword"
                                placeholder="{{'api_name'|translate}}、{{'api_key'|translate}}">
                        </div>
                        <div class="col-1 col-xl-1 col-lg-1">
                            <label class="control-label">&nbsp;</label>
                            <button type="submit"
                                class="form-control btn tpi-btn tpi-primary">{{'button.search'|translate}}</button>
                        </div>
                    </div>
                </form>

                <p-table *ngIf="NoneChooseApiList" [columns]="NoneChooseApiList" [value]="none_choose_api_list" styleClass="p-datatable-striped"
                    selectionMode="single" [style]="{'word-break':'break-word'}" [(selection)]="selected">
                    <ng-template pTemplate="colgroup" let-columns>
                        <colgroup>
                            <col *ngFor="let col of columns" [style.width]="col.width">
                        </colgroup>
                    </ng-template>
                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th *ngFor="let col of columns" scope="col">
                                {{col.header}}
                            </th>
                            <th style="width:50px;" scope="col">{{'action'|translate}}</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-columns="columns">
                        <!-- [pSelectableRow]="rowData" 控制高亮 -->
                        <tr>
                            <td *ngFor="let col of columns">
                                <span>{{rowData[col.field]}}({{rowData['apiName']}})</span>
                            </td>
                            <td style="text-align: center;width: 320px">
                                <div class="btn-group">
                                    <button type="button" class="btn tpi-primary" (click)="Select_API(rowData)">
                                        <span class="fas fa-check-circle">{{'button.select'|translate}}</span>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="footer" let-columns>
                        <tr *ngIf="rowcount_page6">
                            <td [attr.colspan]="columns.length+1" style="color: #b7b7b7;">
                                <span>{{'row_count' | translate}}: {{rowcount_page6}}</span>
                                <button type="button" class="btn tpi-btn tpi-primary pull-right ml-3"
                                    (click)="select_all_page6();">{{'button.select_all'|translate}}</button>
                                <!-- <button type="button" class="btn btn-warning pull-right ml-3"
                                    (click)="moreData_page6();">{{'button.more'|translate}}</button> -->

                                    <!-- 查詢更多 -->
                                    <button  type="button" class="btn tpi-header-return" (click)="moreData_page6()">{{ 'button.more'| translate}}
                                    <i class="fas fa-angle-double-right" style="margin-left: 5px;"></i>
                                    </button>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td [attr.colspan]="columns.length+1">
                                {{'no_rec' | translate}}
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>

            <div class="col-sm-1">
                <span class="fa-6x fas fa-exchange-alt" style="color: #27BEC5; margin-top: 100px;"></span>
            </div>
            <div class="col-sm-6">
                <div class="row" style="margin-bottom: 2px; margin-top: 41px;">
                    <div class="col-3 col-xl-3 col-lg-3">
                        <label class="control-label mr-3">{{'been_chs_api'|translate}}</label>
                    </div>
                </div>
                <p-table *ngIf="ChooseApiList" [columns]="ChooseApiList" [value]="been_choose_api_list" styleClass="p-datatable-striped"
                    selectionMode="single" [style]="{'word-break':'break-word'}" [(selection)]="selected">
                    <ng-template pTemplate="colgroup" let-columns>
                        <colgroup>
                            <col *ngFor="let col of columns" [style.width]="col.width">
                        </colgroup>
                    </ng-template>
                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th *ngFor="let col of columns" scope="col">
                                {{col.header}}
                            </th>
                            <th style="width:50px;" scope="col">{{'action'|translate}}</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-columns="columns">
                        <tr>
                            <td *ngFor="let col of columns">
                                <span>{{rowData[col.field]}}({{rowData['apiName']}})</span>
                            </td>
                            <td style="text-align: center;width: 320px">
                                <div class="btn-group">
                                    <button type="button" class="btn tpi-primary" (click)="Unselect_API(rowData)">
                                        <span class="fa fa-trash-alt">{{'button.delete'|translate}}</span>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td [attr.colspan]="columns.length+1">
                                {{'no_rec' | translate}}
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-12 col-lg-12">
                <button type="button" class="btn tpi-btn tpi-primary float-left"
                    (click)="save_choose_API();">{{'button.apply2'|translate}}</button>
            </div>
        </div>
    </div>
    <!-- 虛擬群組維護 > 動作 > 更新 > 選擇Module -->
    <div [hidden]="pageNum != 7">
        <div class="form-group row">
            <div class="col-sm-5">
                <form [formGroup]="form_page7" (ngSubmit)="call_0233()">
                    <div class="row" style="margin-bottom: 4px;">
                        <div class="col-4 col-xl-4 col-lg-4">
                            <label for="groupkeyword">{{'keyword_search'|translate}}</label>
                            <input type="text" class="form-control" id="groupkeyword" formControlName="groupkeyword"
                                placeholder="{{'module_name'|translate}}">
                        </div>
                        <div class="col-1 col-xl-1 col-lg-1">
                            <label class="control-label">&nbsp;</label>
                            <button type="submit"
                                class="form-control btn tpi-btn tpi-primary">{{'button.search'|translate}}</button>
                        </div>
                    </div>
                </form>

                <p-table *ngIf="NoneChooseModuleList" [columns]="NoneChooseModuleList" [value]="none_choose_module_list" styleClass="p-datatable-striped"
                    selectionMode="single" [style]="{'word-break':'break-word'}" [(selection)]="selected">
                    <ng-template pTemplate="colgroup" let-columns>
                        <colgroup>
                            <col *ngFor="let col of columns" [style.width]="col.width">
                        </colgroup>
                    </ng-template>
                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th *ngFor="let col of columns" scope="col">
                                {{col.header}}
                            </th>
                            <th style="width:50px;" scope="col">{{'action'|translate}}</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-columns="columns">
                        <!-- [pSelectableRow]="rowData" 控制高亮 -->
                        <tr>
                            <td *ngFor="let col of columns">
                                <span>{{rowData[col.field]}}</span>
                            </td>
                            <td style="text-align: center;width: 320px">
                                <div class="btn-group">
                                    <button type="button" class="btn tpi-primary" (click)="Select_Module(rowData)">
                                        <span class="fas fa-check-circle">{{'button.chs_module'|translate}}</span>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="footer" let-columns>
                        <tr *ngIf="rowcount_page7">
                            <td [attr.colspan]="columns.length+1" style="color: #b7b7b7;">
                                <span>{{'row_count' | translate}}: {{rowcount_page7}}</span>
                                <button type="button" class="btn tpi-btn tpi-primary pull-right ml-3"
                                    (click)="select_all_page7();">{{'button.select_all'|translate}}</button>
                                <!-- <button type="button" class="btn btn-warning pull-right ml-3"
                                    (click)="moreData_page7();">{{'button.more'|translate}}</button> -->

                                    <!-- 查詢更多 -->
                                    <button  type="button" class="btn tpi-header-return" (click)="moreData_page7()">{{ 'button.more'| translate}}
                                    <i class="fas fa-angle-double-right" style="margin-left: 5px;"></i>
                                    </button>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td [attr.colspan]="columns.length+1">
                                {{'no_rec' | translate}}
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>

            <div class="col-sm-1">
                <span class="fa-6x fas fa-exchange-alt" style="color: #27BEC5; margin-top: 100px;"></span>
            </div>
            <div class="col-sm-6">
                <div class="row" style="margin-bottom: 2px; margin-top: 41px;">
                    <div class="col-3 col-xl-3 col-lg-3">
                        <label class="control-label mr-3">{{'been_chs_module'|translate}}</label>
                    </div>
                </div>
                <p-table *ngIf="ChooseModuleList" [columns]="ChooseModuleList" [value]="been_choose_module_list" styleClass="p-datatable-striped"
                    selectionMode="single" [style]="{'word-break':'break-word'}" [(selection)]="selected">
                    <ng-template pTemplate="colgroup" let-columns>
                        <colgroup>
                            <col *ngFor="let col of columns" [style.width]="col.width">
                        </colgroup>
                    </ng-template>
                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th *ngFor="let col of columns" scope="col">
                                {{col.header}}
                            </th>
                            <th style="width:50px;" scope="col">{{'action'|translate}}</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-columns="columns">
                        <tr>
                            <td *ngFor="let col of columns">
                                <span>{{rowData[col.field]}}</span>
                            </td>
                            <td style="text-align: center;width: 320px">
                                <div class="btn-group">
                                    <button type="button" class="btn tpi-primary" (click)="Unselect_Module(rowData)">
                                        <span class="fa fa-trash-alt">{{'button.delete'|translate}}</span>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td [attr.colspan]="columns.length+1">
                                {{'no_rec' | translate}}
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-12 col-lg-12">
                <button type="button" class="btn tpi-btn tpi-primary float-left"
                    (click)="save_choose_Module();">{{'button.apply2'|translate}}</button>
            </div>
        </div>
    </div>
    <!-- 虛擬群組維護 > 動作 > 刪除 -->
    <div [hidden]="pageNum != 8">
        <form [formGroup]="form_page8" *ngIf="form_page8">
            <div class="form-group row">
                <!-- <div class="col-sm-4">
                    <label>{{'group_id'|translate}}</label>

                    <label class="form-control border-line">{{form_page8.value.groupID}}</label>
                </div> -->
                <div class="col-sm-6">
                    <label>{{'virtul_group_name'|translate}}</label>
                    <label class="form-control border-line" readonly>{{form_page8.value.groupName | string_length:20}}
                        <a *ngIf="form_page8.value.groupName && form_page8.value.groupName.length > 20"
                            href="javascript:void(0)" pTooltip="{{form_page8.value.groupName}}"
                            tooltipZIndex="10000">{{'show_more'|translate}}</a>
                    </label>
                </div>
                <div class="col-sm-6">
                    <label>{{'virtul_group_alias'|translate}}</label>
                    <label class="form-control border-line" readonly>{{form_page8.value.groupAlias | string_length:20}}
                        <a *ngIf="form_page8.value.groupAlias && form_page8.value.groupAlias.length > 20"
                            href="javascript:void(0)" pTooltip="{{form_page8.value.groupAlias}}"
                            tooltipZIndex="10000">{{'show_more'|translate}}</a>
                    </label>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label>{{'allow_access_days'|translate}} (0: {{'unlimited'|translate}})</label>
                    <label class="form-control border-line" readonly>{{form_page8.value._allowAccessDays}}</label>
                </div>
                <div class="col-sm-6">
                    <label>{{'allow_access_use_times'|translate}} (0: {{'unlimited'|translate}})</label>
                    <label class="form-control border-line" readonly>{{form_page8.value.allowAccessUseTimes}}</label>
                </div>
            </div>
            <div class="form-group row">
                <!-- <div class="col-sm-4">
                    <label>{{'group_access_method'|translate}}</label>
                    <label class="form-control border-line">{{form_page8.value.groupAccess}}</label>
                </div> -->
                <div class="col-sm-6">
                    <label>{{'authorities'|translate}}</label>
                    <label class="form-control border-line" readonly>{{form_page8.value.groupAuthoritiesName}}</label>
                </div>
                <div class="col-sm-6">
                    <label>{{'security_level'|translate}}</label>
                    <label class="form-control border-line" readonly>{{form_page8.value.securityLevelName}}</label>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-12">
                    <label>{{'virtul_group_desc'|translate}}</label>
                    <textarea class="form-control" rows="2" style="resize: none;"
                        [innerHtml]="form_page8.value.groupDesc" readonly autoResize="autoResize"></textarea>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label>{{'create_date'|translate}}</label>
                    <label class="form-control border-line" readonly>{{form_page8.value.createDate}}</label>
                </div>
                <div class="col-sm-6">
                    <label>{{'create_by'|translate}}</label>
                    <label class="form-control border-line" readonly>{{form_page8.value.createUser}}</label>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label>{{'update_date'|translate}}</label>
                    <label class="form-control border-line" readonly>{{form_page8.value.updateDate}}</label>
                </div>
                <div class="col-sm-6">
                    <label>{{'update_user'|translate}}</label>
                    <label class="form-control border-line" readonly>{{form_page8.value.updateUser}}</label>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label>{{'module_list'|translate}}</label>
                    <p-listbox #data_0235Listbox [style]="{'width': '105%', 'font-size': '20px'}" [options]="data_0235"
                        [(ngModel)]="selectedAPI_key" [ngModelOptions]="{standalone: true}" [filter]="true"
                        filterValue="" (click)="showDialog_APIList(selectedAPI_key)"></p-listbox>
                </div>
                <div class="col-sm-8">
                    <label>{{'api_list'|translate}}</label>
                    <p-listbox #data_APIListListbox [style]="{'width': '100%', 'font-size': '20px'}"
                        [options]="data_APIList" [filter]="true"></p-listbox>
                </div>
            </div>
        </form>
        <div class="form-group row">
            <div class="col-12 col-lg-12">
                <button type="submit" class="btn tpi-btn tpi-primary float-left mr-3"
                    (click)="delete_group();">{{'button.delete'|translate}}</button>
                <button type="button" class="btn tpi-btn tpi-primary float-left"
                    (click)="return_to_list();">{{'button.return_to_list'|translate}}</button>
            </div>
        </div>
    </div>
    <!-- 虛擬群組維護 > 新建虛擬群組 -->
    <div [hidden]="pageNum != 9">
        <form [formGroup]="form_page9" (ngSubmit)="submitForm_page9()">
            <div class="form-group row">
                <div class="col-6">
                    <label id="groupName_page9_label" for="groupName" class="control-label">
                        {{'virtul_group_name'|translate}}
                    </label>
                    <input type="text" class="form-control" id="groupName" formControlName="groupName_page9"
                        placeholder="{{'new_virtul_group_name'|translate}}">
                    <div *ngIf="groupName_page9?.invalid && (groupName_page9?.dirty || groupName_page9?.touched)" class="text-danger">
                        <small class="form-text">{{groupName_page9.errors.isRequired}}</small>
                        <small class="form-text">{{groupName_page9.errors.maxlength | translate}}</small>
                        <small class="form-text">{{groupName_page9.errors.minlength | translate}}</small>
                        <small class="form-text">{{groupName_page9.errors.pattern}}</small>
                    </div>
                </div>
                <div class="col-6">
                    <label id="groupAlias_page9_label" for="groupAlias"
                        class="control-label">{{'virtul_group_alias'|translate}}</label>
                    <input type="text" class="form-control" id="groupAlias" formControlName="groupAlias_page9"
                        placeholder="{{'new_virtul_group_alias'|translate}}">
                    <div *ngIf="groupAlias_page9?.invalid && (groupAlias_page9?.dirty || groupAlias_page9?.touched)" class="text-danger">
                        <small class="form-text">{{groupAlias_page9.errors.isRequired}}</small>
                        <small class="form-text">{{groupAlias_page9.errors.maxlength | translate}}</small>
                        <small class="form-text">{{groupAlias_page9.errors.minlength | translate}}</small>
                        <small class="form-text">{{groupAlias_page9.errors.pattern}}</small>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-6">
                    <label id="allowAccessDays_label" for="allowAccessDays" class="control-label">
                        {{'allow_access_days'|translate}} (0: {{'unlimited'|translate}})
                    </label>
                    <div class="row">
                        <div class="col-8" style="padding-right: 5px;">
                            <input type="number" class="form-control" id="allowAccessDays"
                                formControlName="allowAccessDays" min="0" onkeyup="this.value=Math.round(this.value)"
                                onafterpaste="this.value=0">
                            <div *ngIf="allowAccessDays?.invalid && (allowAccessDays?.dirty || allowAccessDays?.touched)"
                                class="text-danger">
                                <small class="form-text">{{allowAccessDays.errors.isRequired}}</small>
                                <small class="form-text">{{allowAccessDays.errors.maxlength | translate}}</small>
                                <small class="form-text">{{allowAccessDays.errors.minlength | translate}}</small>
                                <small class="form-text">{{allowAccessDays.errors.pattern}}</small>
                            </div>
                        </div>
                        <!-- <label id="dayOptionsName_label" class="control-label"> -->
                        <div class="col-4" style="padding-left: 0px;">
                            <p-dropdown [options]="dayOptions_page9" formControlName="dayOptionsName"
                                placeholder="{{'plz_chs' | translate}}" [style]="{'width':'100%'}">
                            </p-dropdown>
                            <div *ngIf="dayOptionsName?.invalid && (dayOptionsName?.dirty || dayOptionsName?.touched)"
                                class="text-danger">
                                <small class="form-text">{{dayOptionsName.errors.isRequired}}</small>
                                <small class="form-text">{{dayOptionsName.errors.maxlength | translate}}</small>
                                <small class="form-text">{{dayOptionsName.errors.minlength | translate}}</small>
                                <small class="form-text">{{dayOptionsName.errors.pattern}}</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <label id="allowAccessUseTimes_label" for="allowAccessUseTimes" class="control-label">
                        {{'allow_access_use_times'|translate}} (0: {{'unlimited'|translate}})
                    </label>
                    <input type="number" class="form-control" id="allowAccessUseTimes"
                        formControlName="allowAccessUseTimes" min="0" onkeyup="this.value=Math.round(this.value)"
                        onafterpaste="this.value=0">
                    <div *ngIf="allowAccessUseTimes?.invalid && (allowAccessUseTimes?.dirty || allowAccessUseTimes?.touched)"
                        class="text-danger">
                        <small class="form-text">{{allowAccessUseTimes.errors.isRequired}}</small>
                        <small class="form-text">{{allowAccessUseTimes.errors.maxlength | translate}}</small>
                        <small class="form-text">{{allowAccessUseTimes.errors.minlength | translate}}</small>
                        <small class="form-text">{{allowAccessUseTimes.errors.pattern}}</small>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-6">
                    <label for="groupAuthorities" class="control-label">{{'authorities'|translate}}</label>
                    <div class="ui-inputgroup">
                        <input type="text" class="form-control" formControlName="groupAuthoritiesName"
                            placeholder="{{'authorities'|translate}}">
                        <button pButton type="button" icon="pi pi-search" class="ml-1 tpi-night"
                            (click)="queryAuthoritiesList_page9();"></button>
                    </div>
                </div>
                <div class="col-6">
                    <label id="securityLevelName_label" for="securityLevel"
                        class="control-label">{{'security_level'|translate}}</label>
                    <div style="display:block">
                        <p-dropdown [options]="new_securityLevels" [filter]="true" [baseZIndex]="10000" appendTo="body"
                            placeholder="{{'plz_chs'| translate}}" formControlName="securityLevelName"
                            [style]="{'width':'100%','z-index':'1000'}">
                        </p-dropdown>
                        <div *ngIf="securityLevelName?.invalid && (securityLevelName?.dirty || securityLevelName?.touched)"
                            class="text-danger">
                            <small class="form-text">{{securityLevelName.errors.isRequired}}</small>
                            <small class="form-text">{{securityLevelName.errors.maxlength | translate}}</small>
                            <small class="form-text">{{securityLevelName.errors.minlength | translate}}</small>
                            <small class="form-text">{{securityLevelName.errors.pattern}}</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-12">
                    <label id="groupDesc_label" for="groupDesc" class="control-label">{{'virtul_group_desc'|translate}}</label>
                    <div>
                        <textarea class="form-control" rows="2" formControlName="groupDesc"
                            placeholder="{{'new_virtul_group_desc'|translate}}"></textarea>
                        <div *ngIf="groupDesc?.invalid && (groupDesc?.dirty || groupDesc?.touched)" class="text-danger">
                            <small class="form-text">{{groupDesc.errors.isRequired}}</small>
                            <small class="form-text">{{groupDesc.errors.maxlength | translate}}</small>
                            <small class="form-text">{{groupDesc.errors.minlength | translate}}</small>
                            <small class="form-text">{{groupDesc.errors.pattern}}</small>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group row">
                <div class="col-12">
                    <label for="moduleList" class="control-label mr-3">{{'module_list'|translate}}</label>
                    <button type="button" class="btn tpi-btn tpi-primary"
                        (click)="Choose_Module_paage9();">{{'button.chs_module'|translate}}</button>
                </div>
            </div>
            <p-table *ngIf="colsModuleList_page9" [columns]="colsModuleList_page9" [value]="data_0235_page9" styleClass="p-datatable-striped"
                selectionMode="single" [style]="{'word-break':'break-word'}" [(selection)]="selected">
                <ng-template pTemplate="colgroup" let-columns>
                    <colgroup>
                        <col *ngFor="let col of columns" [style.width]="col.width">
                    </colgroup>
                </ng-template>
                <ng-template pTemplate="header" let-columns>
                    <tr>
                        <th *ngFor="let col of columns" scope="col">
                            {{col.header}}
                        </th>
                        <th style="width:300px;" scope="col">{{'action'|translate}}</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowData let-columns="columns">
                    <!-- [pSelectableRow]="rowData" 控制高亮 -->
                    <tr>
                        <td *ngFor="let col of columns">
                            <span>{{rowData[col.field]}}</span>
                        </td>
                        <td style="text-align: center;width: 320px">
                            <div class="btn-group">
                                <button type="button" class="btn tpi-primary" (click)="Choose_API_page9(rowData)">
                                    <span class="fa fa-edit">{{'button.chs_api'|translate}}</span>
                                </button>
                            </div>
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage" let-columns>
                    <tr>
                        <td [attr.colspan]="columns.length+1">
                            {{'no_rec' | translate}}
                        </td>
                    </tr>
                </ng-template>
            </p-table>

            <div class="form-group row mt-2">
                <div class="col-12 col-lg-12">
                    <button type="submit" class="btn tpi-btn tpi-primary float-left mr-3" [disabled]="form_page9.invalid">{{'button.create'|translate}}</button>
                    <button type="button" class="btn tpi-btn tpi-primary float-left"
                        (click)="return_to_list();">{{'button.return_to_list'|translate}}</button>
                </div>
            </div>
        </form>

    </div>
    <!-- 虛擬群組維護 >  新建虛擬群組 > 授權核身加入 -->
    <div [hidden]="pageNum != 10">
        <form [formGroup]="form_page10" (ngSubmit)="queryauthorities_page9()">
            <!-- <div class="form-group row">
                <div class="col-3 col-xl-3 col-lg-3">
                    <label for="authoritieskeyword">{{'keyword_search'|translate}}</label>
                    <input type="text" class="form-control" id="authoritieskeyword" formControlName="authoritieskeyword"
                        placeholder="{{'group_auth_id'|translate}}、{{'group_auth_name'|translate}}、{{'group_auth_desc'|translate}}">
                </div>
            </div>
            <div class="form-group row">
                <div class="col-12 col-xl-12 col-lg-12">
                    <button type="submit" class="btn tpi-btn tpi-primary float-left mr-3">{{'button.search'|translate}}</button>
                </div>
            </div> -->
            <span class="p-input-icon-right" style="width:40vw">
              <i class="pi pi-search tpi-i-search" (click)="queryauthorities_page9();"></i>
              <input type="search" class="form-control tpi-i-input" id="authoritieskeyword" formControlName="authoritieskeyword"
                      placeholder="{{'group_auth_id'|translate}}、{{'group_auth_name'|translate}}、{{'group_auth_desc'|translate}}">
            </span>
        </form>
        <hr>
        <p-table *ngIf="colsAuthorities" [columns]="colsAuthorities" [value]="dataAuthorities_page9" styleClass="p-datatable-striped"
            selectionMode="single" [style]="{'word-break':'break-word'}" [(selection)]="selected_page9">
            <ng-template pTemplate="colgroup" let-columns>
                <colgroup>
                    <col style="width: 2.25em">
                    <col *ngFor="let col of columns" [style.width]="col.width">
                </colgroup>
            </ng-template>
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th style="width: 2.25em" scope="col">
                        <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                    </th>
                    <th *ngFor="let col of columns" scope="col">
                        {{col.header}}
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-columns="columns">
                <!-- [pSelectableRow]="rowData" 控制高亮 -->
                <tr>
                    <td style="width: 2.25em">
                        <p-tableCheckbox [value]="rowData"></p-tableCheckbox>
                    </td>
                    <td *ngFor="let col of columns">
                        <span>{{rowData[col.field]}}</span>
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="footer" let-columns>
                <tr *ngIf="rowcount_Authorities_page9">
                    <td [attr.colspan]="columns.length+1">{{'row_count' | translate}}: {{rowcount_Authorities_page9}}
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage" let-columns>
                <tr>
                    <td [attr.colspan]="columns.length+1">
                        {{'no_rec' | translate}}
                    </td>
                </tr>
            </ng-template>
        </p-table>
        <div class="form-group row mt-2">
            <div class="col-12 col-lg-12">
                <button type="button" class="btn tpi-btn tpi-primary float-left mr-3" [disabled]="form.invalid"
                    (click)="chooseAuthorities_page9();">{{'button.add'|translate}}</button>
                <button type="button" class="btn tpi-btn tpi-primary float-left"
                    (click)="return_to_list_page9();">{{'button.return_to_list'|translate}}</button>
            </div>
        </div>
    </div>
    <!-- 虛擬群組維護 >  新建虛擬群組 > 選擇Module -->
    <div [hidden]="pageNum != 11">
        <div class="form-group row">
            <div class="col-sm-5">
                <form [formGroup]="form_page11" (ngSubmit)="call_0233_page11()">
                    <div class="row" style="margin-bottom: 4px;">
                        <div class="col-4 col-xl-4 col-lg-4">
                            <label for="groupkeyword">{{'keyword_search'|translate}}</label>
                            <input type="text" class="form-control" id="groupkeyword" formControlName="groupkeyword"
                                placeholder="{{'module_name'|translate}}">
                        </div>
                        <div class="col-1 col-xl-1 col-lg-1">
                            <label class="control-label">&nbsp;</label>
                            <button type="submit"
                                class="form-control btn tpi-btn tpi-primary">{{'button.search'|translate}}</button>
                        </div>
                    </div>
                </form>

                <p-table *ngIf="NoneChooseModuleList_page11" [columns]="NoneChooseModuleList_page11" styleClass="p-datatable-striped"
                    [value]="none_choose_module_list_page11" selectionMode="single"
                    [style]="{'word-break':'break-word'}" [(selection)]="selected">
                    <ng-template pTemplate="colgroup" let-columns>
                        <colgroup>
                            <col *ngFor="let col of columns" [style.width]="col.width">
                        </colgroup>
                    </ng-template>
                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th *ngFor="let col of columns" scope="col">
                                {{col.header}}
                            </th>
                            <th style="width:50px;" scope="col">{{'action'|translate}}</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-columns="columns">
                        <!-- [pSelectableRow]="rowData" 控制高亮 -->
                        <tr>
                            <td *ngFor="let col of columns">
                                <span>{{rowData[col.field]}}</span>
                            </td>
                            <td style="text-align: center;width: 320px">
                                <div class="btn-group">
                                    <button type="button" class="btn tpi-primary" (click)="Select_Module_page11(rowData)">
                                        <span class="fas fa-check-circle">{{'button.chs_module'|translate}}</span>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="footer" let-columns>
                        <tr *ngIf="rowcount_page11">
                            <td [attr.colspan]="columns.length+1" style="color: #b7b7b7;">
                                <span>{{'row_count' | translate}}: {{rowcount_page11}}</span>
                                <button type="button" class="btn tpi-btn tpi-primary pull-right ml-3"
                                    (click)="select_all_page11();">{{'button.select_all'|translate}}</button>
                                <!-- <button type="button" class="btn btn-warning pull-right ml-3"
                                    (click)="moreData_page11();">{{'button.more'|translate}}</button> -->

                                    <!-- 查詢更多 -->
                                    <button  type="button" class="btn tpi-header-return" (click)="moreData_page11()">{{ 'button.more'| translate}}
                                    <i class="fas fa-angle-double-right" style="margin-left: 5px;"></i>
                                    </button>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td [attr.colspan]="columns.length+1">
                                {{'no_rec' | translate}}
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>

            <div class="col-sm-1">
                <span class="fa-6x fas fa-exchange-alt" style="color: #27BEC5; margin-top: 100px;"></span>
            </div>
            <div class="col-sm-6">
                <div class="row" style="margin-bottom: 2px; margin-top: 41px;">
                    <div class="col-3 col-xl-3 col-lg-3">
                        <label class="control-label mr-3">{{'been_chs_module'|translate}}</label>
                    </div>
                </div>
                <p-table *ngIf="ChooseModuleList_page11" [columns]="ChooseModuleList_page11" styleClass="p-datatable-striped"
                    [value]="been_choose_module_list_page11" selectionMode="single"
                    [style]="{'word-break':'break-word'}" [(selection)]="selected">
                    <ng-template pTemplate="colgroup" let-columns>
                        <colgroup>
                            <col *ngFor="let col of columns" [style.width]="col.width">
                        </colgroup>
                    </ng-template>
                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th *ngFor="let col of columns" scope="col">
                                {{col.header}}
                            </th>
                            <th style="width:50px;" scope="col">{{'action'|translate}}</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-columns="columns">
                        <tr>
                            <td *ngFor="let col of columns">
                                <span>{{rowData[col.field]}}</span>
                            </td>
                            <td style="text-align: center;width: 320px">
                                <div class="btn-group">
                                    <button type="button" class="btn tpi-primary"
                                        (click)="Unselect_Module_page11(rowData)">
                                        <span class="fa fa-trash-alt">{{'button.delete'|translate}}</span>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td [attr.colspan]="columns.length+1">
                                {{'no_rec' | translate}}
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-12 col-lg-12">
                <button type="button" class="btn tpi-btn tpi-primary float-left"
                    (click)="save_choose_Module_page11();">{{'button.apply2'|translate}}</button>
            </div>
        </div>
    </div>
    <!-- 虛擬群組維護 >  新建虛擬群組 > 選擇API -->
    <div [hidden]="pageNum != 12">
        <div class="form-group row">
            <div class="col-sm-5">
                <form [formGroup]="form_page12" (ngSubmit)="call_0234_page12()">
                    <div class="row" style="margin-bottom: 4px;">
                        <div class="col-4 col-xl-4 col-lg-4">
                            <label for="groupkeyword">{{'keyword_search'|translate}}</label>
                            <input type="text" class="form-control" id="groupkeyword" formControlName="groupkeyword"
                                placeholder="{{'api_name'|translate}}、{{'api_key'|translate}}">
                        </div>
                        <div class="col-1 col-xl-1 col-lg-1">
                            <label class="control-label">&nbsp;</label>
                            <button type="submit"
                                class="form-control btn tpi-btn tpi-primary">{{'button.search'|translate}}</button>
                        </div>
                    </div>
                </form>

                <p-table *ngIf="NoneChooseApiList_page12" [columns]="NoneChooseApiList_page12" styleClass="p-datatable-striped"
                    [value]="none_choose_api_list_page12" selectionMode="single" [style]="{'word-break':'break-word'}"
                    [(selection)]="selected">
                    <ng-template pTemplate="colgroup" let-columns>
                        <colgroup>
                            <col *ngFor="let col of columns" [style.width]="col.width">
                        </colgroup>
                    </ng-template>
                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th *ngFor="let col of columns" scope="col">
                                {{col.header}}
                            </th>
                            <th style="width:50px;" scope="col">{{'action'|translate}}</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-columns="columns">
                        <!-- [pSelectableRow]="rowData" 控制高亮 -->
                        <tr>
                            <td *ngFor="let col of columns">
                                <span>{{rowData[col.field]}}({{rowData['apiName']}})</span>
                            </td>
                            <td style="text-align: center;width: 320px">
                                <div class="btn-group">
                                    <button type="button" class="btn tpi-primary" (click)="Select_API_page12(rowData)">
                                        <span class="fas fa-check-circle">{{'button.select'|translate}}</span>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="footer" let-columns>
                        <tr *ngIf="rowcount_page12">
                            <td [attr.colspan]="columns.length+1" style="color: #b7b7b7;">
                                <span>{{'row_count' | translate}}: {{rowcount_page12}}</span>
                                <button type="button" class="btn tpi-btn tpi-primary pull-right ml-3"
                                    (click)="select_all_page12();">{{'button.select_all'|translate}}</button>
                                <!-- <button type="button" class="btn btn-warning pull-right ml-3"
                                    (click)="moreData_page12();">{{'button.more'|translate}}</button> -->

                                    <!-- 查詢更多 -->
                                    <button  type="button" class="btn tpi-header-return" (click)="moreData_page12()">{{ 'button.more'| translate}}
                                    <i class="fas fa-angle-double-right" style="margin-left: 5px;"></i>
                                    </button>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td [attr.colspan]="columns.length+1">
                                {{'no_rec' | translate}}
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>

            <div class="col-sm-1">
                <span class="fa-6x fas fa-exchange-alt" style="color: #27BEC5; margin-top: 100px;"></span>
            </div>
            <div class="col-sm-6">
                <div class="row" style="margin-bottom: 2px; margin-top: 41px;">
                    <div class="col-3 col-xl-3 col-lg-3">
                        <label class="control-label mr-3">{{'been_chs_api'|translate}}</label>
                    </div>
                </div>
                <p-table *ngIf="ChooseApiList_page12" [columns]="ChooseApiList_page12" styleClass="p-datatable-striped"
                    [value]="been_choose_api_list_page12" selectionMode="single" [style]="{'word-break':'break-word'}"
                    [(selection)]="selected">
                    <ng-template pTemplate="colgroup" let-columns>
                        <colgroup>
                            <col *ngFor="let col of columns" [style.width]="col.width">
                        </colgroup>
                    </ng-template>
                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th *ngFor="let col of columns" scope="col">
                                {{col.header}}
                            </th>
                            <th style="width:50px;" scope="col">{{'action'|translate}}</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-columns="columns">
                        <tr>
                            <td *ngFor="let col of columns">
                                <span>{{rowData[col.field]}}({{rowData['apiName']}})</span>
                            </td>
                            <td style="text-align: center;width: 320px">
                                <div class="btn-group">
                                    <button type="button" class="btn tpi-primary" (click)="Unselect_API_page12(rowData)">
                                        <span class="fa fa-trash-alt">{{'button.delete'|translate}}</span>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td [attr.colspan]="columns.length+1">
                                {{'no_rec' | translate}}
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-12 col-lg-12">
                <button type="button" class="btn tpi-btn tpi-primary float-left"
                    (click)="save_choose_API_page12();">{{'button.apply2'|translate}}</button>
            </div>
        </div>
    </div>
</app-container>
<app-dialog [title]="dialogTitle" #dialog></app-dialog>
<p-toast [style]="{marginTop: '60px'}" position="top-left"></p-toast>
