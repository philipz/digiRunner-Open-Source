"use strict";(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[69],{70069:(U,Z,r)=>{r.r(Z),r.d(Z,{Ac0019Module:()=>Zt});var o=r(99291),T=r(86347),_=r(15861),y=r(14525),p=r(93075),D=r(71764),v=r(59783),t=r(87587),g=r(56435),h=r(45682),c=r(41313),b=r(86518),L=r(63710),N=r(23099),x=r(69808),R=r(40845),w=r(4119),B=r(49603),k=r(73407),A=r(1694),I=r(51062);function O(n,i){if(1&n&&(t.TgZ(0,"div",4)(1,"label"),t._uU(2,"Detail ID"),t.qZA(),t.TgZ(3,"label",19),t._uU(4),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("hidden",!(null!=e.data&&e.data.detailId)),t.xp6(1),t.Oqu(null==e.data?null:e.data.detailId)}}function S(n,i){if(1&n&&(t.TgZ(0,"div",20)(1,"small",21),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,1,null==e.orderNo?null:e.orderNo.errors.required))}}function M(n,i){if(1&n&&(t.TgZ(0,"div",20)(1,"small",21),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"small",21),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,null==e.ldapUrl?null:e.ldapUrl.errors.pattern)),t.xp6(3),t.Oqu(t.lcZ(6,4,null==e.ldapUrl?null:e.ldapUrl.errors.required))}}function J(n,i){if(1&n&&(t.TgZ(0,"div",20)(1,"small",21),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,1,null==e.ldapBaseDn?null:e.ldapBaseDn.errors.required))}}function P(n,i){if(1&n&&(t.TgZ(0,"div",20)(1,"small",21),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,1,null==e.ldapDn?null:e.ldapDn.errors.required))}}const q=function(n){return{required:n}};let Y=(()=>{class n{constructor(e,l){this.fb=e,this.toolService=l,this.no=1,this._disabled=!1,this.action="",this.change=new t.vpe,this.remove=new t.vpe,this.ldapPattern="^(ldaps?)://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|]"}ngOnInit(){var e=this;return(0,_.Z)(function*(){var l;e.form=e.fb.group({orderNo:new p.NI(e.data?e.data.orderNo:e.no+1,[A.np()]),ldapUrl:new p.NI(e.data?e.data.ldapUrl:"",[A.np()]),ldapBaseDn:new p.NI(e.data?e.data.ldapBaseDn:"",[A.np()]),ldapDn:new p.NI(e.data?e.data.ldapDn:"",[A.np()])});const s=yield e.toolService.getDict(["validation.format"]);null===(l=e.ldapUrl)||void 0===l||l.setValidators([A.np(),A.FW(e.ldapPattern,s["validation.format"])]),e._disabled&&e.form.disable(),e.form.valueChanges.subscribe(d=>{let m=Object.assign({valid:e.form.valid,no:e.no},d);e.change.emit(m)})})()}deleteItem(){this._ref.destroy(),this.remove.emit(this.no)}get orderNo(){return this.form.get("orderNo")}get ldapUrl(){return this.form.get("ldapUrl")}get ldapBaseDn(){return this.form.get("ldapBaseDn")}get ldapDn(){return this.form.get("ldapDn")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.qu),t.Y36(h.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ldap-data-list-detail"]],inputs:{_ref:"_ref",data:"data",no:"no",_disabled:"_disabled",action:"action"},outputs:{change:"change",remove:"remove"},decls:30,vars:23,consts:[[1,"form-group","row","ldapdetail",3,"formGroup"],[1,"col-11"],[1,"form-group","row"],["class","col-6",4,"ngIf"],[1,"col-6"],["id","orderNo_label","for","orderNo",1,"control-label"],["type","number","id","orderNo","formControlName","orderNo","placeholder","",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"col-12"],["id","ldapUrl_label","for","ldapUrl",1,"control-label"],["type","text","id","ldapUrl","formControlName","ldapUrl","placeholder","",1,"form-control"],["id","ldapBaseDn_label","for","ldapBaseDn",1,"control-label"],["type","text","id","ldapBaseDn","formControlName","ldapBaseDn","placeholder","",1,"form-control"],["id","ldapDn_label","for","ldapDn",1,"control-label"],["type","text","id","ldapDn","formControlName","ldapDn","placeholder","",1,"form-control"],[1,"col-1","align-self-center",2,"text-align","end",3,"hidden"],[1,"d-inline-flex"],["type","button",1,"btn","tpi-primary","ms-1",2,"border-radius","50%",3,"click"],[1,"fa","fa-minus"],[1,"form-control","border-line",3,"hidden"],[1,"text-danger"],[1,"form-text"]],template:function(e,l){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,O,5,2,"div",3),t.TgZ(4,"div",4)(5,"label",5),t._uU(6,"Order"),t.qZA(),t._UZ(7,"input",6),t.YNc(8,S,4,3,"div",7),t.qZA()(),t.TgZ(9,"div",2)(10,"div",8)(11,"label",9),t._uU(12,"URL"),t.qZA(),t._UZ(13,"input",10),t.YNc(14,M,7,6,"div",7),t.qZA()(),t.TgZ(15,"div",2)(16,"div",4)(17,"label",11),t._uU(18,"Base DN"),t.qZA(),t._UZ(19,"input",12),t.YNc(20,J,4,3,"div",7),t.qZA(),t.TgZ(21,"div",4)(22,"label",13),t._uU(23,"Bind DN"),t.qZA(),t._UZ(24,"input",14),t.YNc(25,P,4,3,"div",7),t.qZA()()(),t.TgZ(26,"div",15)(27,"div",16)(28,"button",17),t.NdJ("click",function(){return l.deleteItem()}),t._UZ(29,"i",18),t.qZA()()()()),2&e&&(t.Q6J("formGroup",l.form),t.xp6(3),t.Q6J("ngIf","update"==l.action||"detail"==l.action),t.xp6(2),t.Tol(t.VKq(15,q,!l._disabled)),t.xp6(3),t.Q6J("ngIf",(null==l.orderNo?null:l.orderNo.invalid)&&((null==l.orderNo?null:l.orderNo.dirty)||(null==l.orderNo?null:l.orderNo.touched))),t.xp6(3),t.Tol(t.VKq(17,q,!l._disabled)),t.xp6(3),t.Q6J("ngIf",(null==l.ldapUrl?null:l.ldapUrl.invalid)&&((null==l.ldapUrl?null:l.ldapUrl.dirty)||(null==l.ldapUrl?null:l.ldapUrl.touched))),t.xp6(3),t.Tol(t.VKq(19,q,!l._disabled)),t.xp6(3),t.Q6J("ngIf",(null==l.ldapBaseDn?null:l.ldapBaseDn.invalid)&&((null==l.ldapBaseDn?null:l.ldapBaseDn.dirty)||(null==l.ldapBaseDn?null:l.ldapBaseDn.touched))),t.xp6(2),t.Tol(t.VKq(21,q,!l._disabled)),t.xp6(3),t.Q6J("ngIf",(null==l.ldapDn?null:l.ldapDn.invalid)&&((null==l.ldapDn?null:l.ldapDn.dirty)||(null==l.ldapDn?null:l.ldapDn.touched))),t.xp6(1),t.Q6J("hidden",l._disabled))},directives:[p.JL,p.sg,x.O5,p.wV,p.Fj,p.JJ,p.u],pipes:[I.X$],styles:[".ldapdetail[_ngcontent-%COMP%]{background-color:#eee;padding:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background:#eee}"]}),n})();const Q=["ldapData"];function F(n,i){}let H=(()=>{class n{constructor(){this.action="",this.disabled=!1,this.no=0,this._ldapDataList=[]}ngOnInit(){}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.ldapDataRef.clear(),this._ldapDataList=[],this.no=0,""==e?this.addldapData():e&&Array.isArray(e)&&e.forEach(l=>{let a={orderNo:l.orderNo,ldapUrl:l.ldapUrl,ldapBaseDn:l.ldapBaseDn,ldapDn:l.ldapDn};l.detailId&&(a.detailId=l.detailId),this.addldapData(a)})}addldapData(e){let l=this.ldapDataRef.createComponent(Y),a={};e?(a.orderNo=e.orderNo,a.ldapUrl=e.ldapUrl,a.ldapBaseDn=e.ldapBaseDn,a.ldapDn=e.ldapDn,a.no=this.no,(null==e?void 0:e.detailId)&&(a.detailId=e.detailId),a.valid=!0):(a.orderNo=this.no+1,a.ldapBaseDn="",a.ldapDn="",a.ldapUrl="",a.no=this.no,a.valid=!1),this._ldapDataList.push(a),l.instance._ref=l,l.instance.no=this.no,l.instance.data=this._ldapDataList[this.no],l.instance._disabled=this.disabled,l.instance.action=this.action,this.no++,this.onChange(this._ldapDataList),l.instance.change.subscribe(s=>{let d=this._ldapDataList.findIndex(m=>m.no===s.no);d||0!=this._ldapDataList.length?(this._ldapDataList[d].ldapBaseDn=s.ldapBaseDn,this._ldapDataList[d].ldapDn=s.ldapDn,this._ldapDataList[d].ldapUrl=s.ldapUrl,this._ldapDataList[d].orderNo=s.orderNo,this._ldapDataList[d].valid=s.valid):console.log("_ldapDataList.length = ",this._ldapDataList.length),this.onChange(this._ldapDataList)}),l.instance.remove.subscribe(s=>{let d=this._ldapDataList.findIndex(m=>m.no===s);this._ldapDataList.splice(d,1),0==this._ldapDataList.length&&(this.no=0,this.onChange([]),this.addldapData())})}setDisabledState(e){this.disabled=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ldap-data-list"]],viewQuery:function(e,l){if(1&e&&t.Gf(Q,7,t.s_b),2&e){let a;t.iGM(a=t.CRH())&&(l.ldapDataRef=a.first)}},inputs:{action:"action"},features:[t._Bn([{provide:p.JU,useExisting:(0,t.Gpc)(()=>n),multi:!0}])],decls:7,vars:1,consts:[[1,"form-group","row"],["content",""],[1,"col-12"],["ldapData",""],["type","button",1,"btn","tpi-second",2,"border-radius","50%",3,"hidden","click"],[1,"fa","fa-plus"]],template:function(e,l){1&e&&(t.TgZ(0,"div",0,1)(2,"div",2),t.YNc(3,F,0,0,"ng-template",null,3,t.W1O),t.TgZ(5,"button",4),t.NdJ("click",function(){return l.addldapData()}),t._UZ(6,"i",5),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("hidden",l.disabled))},styles:[""]}),n})();var V=r(17773),E=r(19114);function j(n,i){1&n&&(t.TgZ(0,"tr")(1,"th",54),t._uU(2,"Icon"),t.qZA(),t.TgZ(3,"th",55),t._uU(4,"Enable"),t.qZA(),t.TgZ(5,"th",56),t._uU(6,"ID"),t.qZA(),t.TgZ(7,"th",57),t._uU(8,"Page Title"),t.qZA(),t.TgZ(9,"th",58),t._uU(10,"Timeouts(ms)"),t.qZA(),t.TgZ(11,"th",59),t._uU(12,"Order"),t.qZA(),t.TgZ(13,"th",60),t._uU(14,"URL"),t.qZA(),t.TgZ(15,"th",61),t._uU(16,"Base DN"),t.qZA(),t.TgZ(17,"th",61),t._uU(18,"Create User"),t.qZA(),t.TgZ(19,"th",61),t._uU(20,"Create Time"),t.qZA(),t.TgZ(21,"th",57),t._uU(22),t.ALo(23,"translate"),t.qZA()(),t.TgZ(24,"tr")(25,"th",62),t._uU(26,"Bind DN"),t.qZA(),t.TgZ(27,"th",62),t._uU(28,"Update User"),t.qZA(),t.TgZ(29,"th",62),t._uU(30,"Update Time"),t.qZA()()),2&n&&(t.xp6(22),t.Oqu(t.lcZ(23,1,"action")))}function G(n,i){if(1&n&&(t.ynx(0),t._UZ(1,"img",63),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("src","Y"==e.status?"assets/images/icon_green.png":"assets/images/icon_red.png",t.LSH)}}function z(n,i){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.status," ")}}function W(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"tr",1)(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA()(),t.TgZ(12,"tr")(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()(),t.BQk()),2&n){const e=i.$implicit,l=i.index,a=t.oxw(2);t.xp6(1),t.Q6J("hidden",0==l),t.xp6(1),t.uIk("rowspan",2),t.xp6(1),t.Oqu(e.orderNo),t.xp6(1),t.uIk("rowspan",2),t.xp6(1),t.Oqu(e.ldapUrl),t.xp6(1),t.uIk("rowspan",1),t.xp6(1),t.Oqu(e.ldapBaseDn),t.xp6(1),t.uIk("rowspan",1),t.xp6(1),t.Oqu(e.createUser),t.xp6(1),t.uIk("rowspan",1),t.xp6(1),t.Oqu(a.formateDate(e.createDateTime)),t.xp6(2),t.uIk("rowspan",1),t.xp6(1),t.Oqu(e.ldapDn),t.xp6(1),t.uIk("rowspan",1),t.xp6(1),t.Oqu(e.updateUser),t.xp6(1),t.uIk("rowspan",1),t.xp6(1),t.Oqu(a.formateDate(e.updateDateTime))}}function X(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._UZ(2,"img",63),t.qZA(),t.TgZ(3,"td"),t.YNc(4,G,2,1,"ng-container",64),t.YNc(5,z,1,1,"ng-template",null,65,t.W1O),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.TgZ(23,"td",66)(24,"button",67),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().changePage("detail",s)}),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"button",68),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().changePage("update",s)}),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"button",69),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().changePage("delete",s)}),t.ALo(29,"translate"),t.qZA()()(),t.YNc(30,W,19,17,"ng-container",70)}if(2&n){const e=i.$implicit,l=t.MAs(6),a=t.oxw();t.xp6(1),t.uIk("rowspan",2*e.ldapDataList.length),t.xp6(1),t.Q6J("src",e.iconFile,t.LSH),t.xp6(1),t.uIk("rowspan",2*e.ldapDataList.length),t.xp6(1),t.Q6J("ngIf","Y"==e.status||"N"==e.status)("ngIfElse",l),t.xp6(3),t.uIk("rowspan",2*e.ldapDataList.length),t.xp6(1),t.Oqu(e.id),t.xp6(1),t.uIk("rowspan",2*e.ldapDataList.length),t.xp6(1),t.Oqu(e.pageTitle),t.xp6(1),t.uIk("rowspan",2*e.ldapDataList.length),t.xp6(1),t.Oqu(e.ldapTimeout),t.xp6(1),t.uIk("rowspan",2),t.xp6(1),t.Oqu(null==e||null==e.ldapDataList[0]?null:e.ldapDataList[0].orderNo),t.xp6(1),t.uIk("rowspan",2),t.xp6(1),t.Oqu(null==e||null==e.ldapDataList[0]?null:e.ldapDataList[0].ldapUrl),t.xp6(1),t.uIk("rowspan",1),t.xp6(1),t.Oqu(null==e||null==e.ldapDataList[0]?null:e.ldapDataList[0].ldapBaseDn),t.xp6(1),t.uIk("rowspan",1),t.xp6(1),t.Oqu(null==e||null==e.ldapDataList[0]?null:e.ldapDataList[0].createUser),t.xp6(1),t.uIk("rowspan",1),t.xp6(1),t.Oqu(a.formateDate(null==e||null==e.ldapDataList[0]?null:e.ldapDataList[0].createDateTime)),t.xp6(1),t.uIk("rowspan",2*e.ldapDataList.length),t.xp6(1),t.Q6J("pTooltip",t.lcZ(25,26,"button.detail")),t.xp6(2),t.Q6J("pTooltip",t.lcZ(27,28,"button.update")),t.xp6(2),t.Q6J("pTooltip",t.lcZ(29,30,"button.delete")),t.xp6(2),t.Q6J("ngForOf",e.ldapDataList)}}function K(n,i){1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n&&(t.xp6(1),t.uIk("colspan",11),t.xp6(1),t.hij(" ",t.lcZ(3,2,"no_rec")," "))}function tt(n,i){if(1&n&&(t.TgZ(0,"div",71)(1,"small",72),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"small",72),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,null==e.status?null:e.status.errors.pattern)),t.xp6(3),t.Oqu(t.lcZ(6,4,null==e.status?null:e.status.errors.isRequired))}}function et(n,i){if(1&n&&(t.TgZ(0,"div",71)(1,"small",72),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"small",72),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"small",72),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"small",72),t._uU(11),t.ALo(12,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,4,null==e.ldapTimeout?null:e.ldapTimeout.errors.max)),t.xp6(3),t.Oqu(t.lcZ(6,6,null==e.ldapTimeout?null:e.ldapTimeout.errors.min)),t.xp6(3),t.Oqu(t.lcZ(9,8,null==e.ldapTimeout?null:e.ldapTimeout.errors.pattern)),t.xp6(3),t.Oqu(t.lcZ(12,10,null==e.ldapTimeout?null:e.ldapTimeout.errors.isRequired))}}function lt(n,i){if(1&n&&(t.TgZ(0,"div",71)(1,"small",72),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"small",72),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,null==e.policy?null:e.policy.errors.pattern)),t.xp6(3),t.Oqu(t.lcZ(6,4,null==e.policy?null:e.policy.errors.isRequired))}}function at(n,i){if(1&n&&(t.TgZ(0,"div",71)(1,"small",72),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,1,null==e.approvalResultMail?null:e.approvalResultMail.errors.isRequired))}}function nt(n,i){if(1&n&&(t.TgZ(0,"div",71)(1,"small",72),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,1,null==e.pageTitle?null:e.pageTitle.errors.isRequired))}}function ot(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearFile()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"remove")))}function it(n,i){if(1&n&&(t.TgZ(0,"div",73),t._UZ(1,"img",63),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("src",e._fileSrc,t.LSH)}}function rt(n,i){1&n&&t._UZ(0,"div",74)}function st(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",75),t.NdJ("click",function(){return t.CHM(e),t.oxw().create()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",!e.form.valid||!e.checkLdapDataListValid()),t.xp6(1),t.Oqu(t.lcZ(2,2,"button.create"))}}function pt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",75),t.NdJ("click",function(){return t.CHM(e),t.oxw().update()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",!e.form.valid||!e.checkLdapDataListValid()),t.xp6(1),t.Oqu(t.lcZ(2,2,"button.update"))}}const dt=function(){return{backgroundColor:"var(--red-300)","border-color":"var(--red-300)"}};function ut(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",76)(1,"button",77),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(94).accept()}),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",78),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(94).reject()}),t.ALo(4,"translate"),t.qZA()()}2&n&&(t.xp6(1),t.s9C("label",t.lcZ(2,3,"button.confirm")),t.Q6J("ngStyle",t.DdM(7,dt)),t.xp6(2),t.s9C("label",t.lcZ(4,5,"button.cancel")))}const ct=function(){return{"word-break":"break-word"}},mt=function(){return{marginTop:"60px"}},gt=function(){return{width:"50vw"}},_t=[{path:"",component:(()=>{class n extends y.H{constructor(e,l,a,s,d,m,f,u){super(e,l),this.toolService=a,this.serverService=s,this.messageService=d,this.fb=m,this.alertService=f,this.confirmationService=u,this.currentTitle=this.title,this.currentAction="",this.pageNum=1,this.cols=[],this.dataList=[],this._fileSrc=null}ngOnInit(){this.form=this.fb.group({status:new p.NI,ldapTimeout:new p.NI,policy:new p.NI,approvalResultMail:new p.NI,iconFile:new p.NI,pageTitle:new p.NI,ldapDataList:new p.NI}),this.queryIdPInfoList_mldap(),this.ldapTimeout.valueChanges.subscribe(e=>{null==e&&this.ldapTimeout.setValue("")})}queryIdPInfoList_mldap(){this.serverService.queryIdPInfoList_mldap().subscribe(e=>{this.toolService.checkDpSuccess(e.ResHeader)&&(this.dataList=e.RespBody.idPInfoList)})}formateDate(e){return"Invalid Date"!=D(e).format("YYYY-MM-DD HH:mm:ss")?D(e).format("YYYY-MM-DD HH:mm:ss"):""}headerReturn(){this.changePage("query")}changePage(e,l){var a=this;return(0,_.Z)(function*(){const d=yield a.toolService.getDict(["button.delete","button.create","button.update","button.detail"]);switch(a.currentAction=e,a.resetFormValidator(a.form),a.form.enable(),a.clearFile(),e){case"query":a.currentTitle=a.title,a.pageNum=1;break;case"create":a.serverService.createIdPInfo_mldap_before().subscribe(u=>{a.toolService.checkDpSuccess(u.ResHeader)&&(a.addFormValidator(a.form,u.RespBody.constraints),a.currentTitle=`${a.title} > ${d["button.create"]}`,a.pageNum=2,a.status.markAsTouched(),a.policy.markAsTouched())});break;case"detail":a.serverService.queryIdPInfoDetailByPk_mldap({masterId:null==l?void 0:l.id}).subscribe(u=>{a.toolService.checkDpSuccess(u.ResHeader)&&(a.idpInfoDetail=u.RespBody,a.currentTitle=`${a.title} > ${d["button.detail"]}`,a.pageNum=2,a.form.disable(),a.status.setValue(u.RespBody.status),a.ldapTimeout.setValue(u.RespBody.ldapTimeout),a.policy.setValue(u.RespBody.policy),a.approvalResultMail.setValue(u.RespBody.approvalResultMail),a.pageTitle.setValue(u.RespBody.pageTitle),u.RespBody.iconFile&&(a._fileSrc=u.RespBody.iconFile),a.ldapDataList.setValue(u.RespBody.ldapDataList))});break;case"update":a.serverService.queryIdPInfoDetailByPk_mldap({masterId:null==l?void 0:l.id}).subscribe(u=>{a.toolService.checkDpSuccess(u.ResHeader)&&(a.idpInfoDetail=u.RespBody,a.status.setValue(u.RespBody.status),a.ldapTimeout.setValue(u.RespBody.ldapTimeout),a.policy.setValue(u.RespBody.policy),a.approvalResultMail.setValue(u.RespBody.approvalResultMail),a.pageTitle.setValue(u.RespBody.pageTitle),u.RespBody.iconFile&&(a._fileSrc=u.RespBody.iconFile),a.ldapDataList.setValue(u.RespBody.ldapDataList),a.serverService.updateIdPInfo_mldap_before().subscribe(C=>{a.toolService.checkDpSuccess(C.ResHeader)&&(a.addFormValidator(a.form,C.RespBody.constraints),a.currentTitle=`${a.title} > ${d["button.update"]}`,a.pageNum=2)}))});break;case"delete":a.delete(l)}})()}openFileBrowser(){$("#fileName").click()}checkLdapDataListValid(){return!!Array.isArray(this.ldapDataList.value)&&this.ldapDataList.value.every(e=>1==e.valid)}fileChange(e){var l=this;return(0,_.Z)(function*(){const s=yield l.toolService.getDict(["uploading","cfm_img_format","cfm_size","message.success","upload_result","waiting"]);if(0!=e.length){let d=new FileReader;d.onloadend=()=>{if(e.item(0).size>2e3)return l.alertService.ok("Error","File size cannot exceed 2k."),void l.clearFile();l.messageService.add({severity:"success",summary:s.upload_result,detail:`${s["message.success"]}!`}),l._fileSrc=d.result},d.readAsDataURL(e.item(0))}else l._fileSrc=null})()}clearFile(){this._fileSrc=null,$("#fileName").val("")}create(){var e=this;let l={status:this.status.value,ldapTimeout:this.ldapTimeout.value,policy:this.policy.value,approvalResultMail:this.approvalResultMail.value,pageTitle:this.pageTitle.value,ldapDataList:this.ldapDataList.value.map(a=>({orderNo:a.orderNo,ldapUrl:a.ldapUrl,ldapBaseDn:a.ldapBaseDn,ldapDn:a.ldapDn}))};this._fileSrc&&(l.iconFile=this._fileSrc),this.serverService.createIdPInfo_mldap(l).subscribe(function(){var a=(0,_.Z)(function*(s){if(e.toolService.checkDpSuccess(s.ResHeader)){const d=["message.create","message.success","message.user"],m=yield e.toolService.getDict(d);e.messageService.add({severity:"success",summary:`${m["message.create"]} AC MLDAP IdP User`,detail:`${m["message.create"]} ${m["message.success"]}!`}),e.queryIdPInfoList_mldap(),e.changePage("query")}});return function(s){return a.apply(this,arguments)}}())}update(){var l,e=this;let a={masterId:null===(l=this.idpInfoDetail)||void 0===l?void 0:l.masterId,status:this.status.value,ldapTimeout:this.ldapTimeout.value,policy:this.policy.value,approvalResultMail:this.approvalResultMail.value,pageTitle:this.pageTitle.value,ldapDataList:this.ldapDataList.value.map(s=>({orderNo:s.orderNo,ldapUrl:s.ldapUrl,ldapBaseDn:s.ldapBaseDn,ldapDn:s.ldapDn,detailId:s.detailId}))};this._fileSrc&&(a.iconFile=this._fileSrc),this.serverService.updateIdPInfo_mldap(a).subscribe(function(){var s=(0,_.Z)(function*(d){if(e.toolService.checkDpSuccess(d.ResHeader)){const m=["message.update","message.success"],f=yield e.toolService.getDict(m);e.messageService.add({severity:"success",summary:`${f["message.update"]} AC LDAP IdP User`,detail:`${f["message.update"]} ${f["message.success"]}!`}),e.queryIdPInfoList_mldap(),e.changePage("query")}});return function(d){return s.apply(this,arguments)}}())}delete(e){var l=this;return(0,_.Z)(function*(){const s=yield l.toolService.getDict(["cfm_del"]);l.confirmationService.confirm({header:s.cfm_del,message:`${e.id}`,accept:()=>{l.serverService.deleteIdPInfo_mldap({masterId:e.id}).subscribe(function(){var d=(0,_.Z)(function*(m){const u=yield l.toolService.getDict(["message.delete","message.success","message.user"]);l.toolService.checkDpSuccess(m.ResHeader)&&(l.messageService.add({severity:"success",summary:`${u["message.delete"]} AC LDAP IdP User`,detail:`${u["message.delete"]} ${u["message.success"]}!`}),l.queryIdPInfoList_mldap(),l.changePage("query"))});return function(m){return d.apply(this,arguments)}}())}})})()}get status(){return this.form.get("status")}get ldapTimeout(){return this.form.get("ldapTimeout")}get policy(){return this.form.get("policy")}get approvalResultMail(){return this.form.get("approvalResultMail")}get pageTitle(){return this.form.get("pageTitle")}get ldapDataList(){return this.form.get("ldapDataList")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(o.gz),t.Y36(g.W),t.Y36(h.g),t.Y36(c.N),t.Y36(v.ez),t.Y36(p.qu),t.Y36(b.c),t.Y36(v.YP))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ac0019"]],features:[t._Bn([v.YP]),t.qOj],decls:96,vars:39,consts:[[3,"title","isDefault","headerReturn"],[3,"hidden"],[1,"form-group","row"],[1,"col-12"],["type","button",1,"btn","tpi-btn","tpi-second","float-end",3,"click"],[1,"form-group"],["selectionMode","single","responsiveLayout","scroll","styleClass","p-datatable-striped",3,"columns","value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"formGroup"],[1,"col-6",3,"hidden"],[1,"form-control","border-line"],[1,"col-6"],["id","status_label","for","status",1,"control-label"],[1,"p-form-check-line","form-group"],[1,"p-form-check"],["formControlName","status","value","Y","inputId","statusY"],["for","statusY",1,"ms-2","mb-0"],["formControlName","status","value","N","inputId","statusN"],["for","statusN",1,"ms-2","mb-0"],["class","text-danger",4,"ngIf"],["id","ldapTimeout_label","for","clientName",1,"control-label"],["type","number","id","ldapTimeout","formControlName","ldapTimeout","placeholder","",1,"form-control"],["id","policy_label","for","policy",1,"control-label"],["formControlName","policy","value","S","inputId","Sequentially"],["for","Sequentially",1,"ms-2","mb-0"],["formControlName","policy","value","R","inputId","Random"],["for","Random",1,"ms-2","mb-0"],["id","approvalResultMail_label","for","approvalResultMail",1,"control-label"],[2,"display","block"],["rows","2","id","approvalResultMail","formControlName","approvalResultMail","pInputTextarea","",2,"width","100%"],["id","pageTitle_label","for","pageTitle",1,"control-label"],["type","text","id","pageTitle","formControlName","pageTitle","placeholder","",1,"form-control"],[1,"col-8"],["for","iconFile",1,"control-label"],[1,"d-flex","col-auto",3,"hidden"],[1,"me-2"],["type","button",1,"btn","tpi-btn","tpi-night","pull-right",3,"click"],[1,""],["type","button","class","btn tpi-btn tpi-night pull-right",3,"click",4,"ngIf"],[1,"col-sm-6",2,"padding-right","unset"],["type","file","id","fileName","formControlName","iconFile",2,"display","none",3,"change"],["class","col-auto",4,"ngIf"],["class","col-12 ms-3","class","noimg",4,"ngIf"],[1,"form-group","col-12"],["formControlName","ldapDataList",3,"action"],[1,"col-12","col-lg-12"],["type","button","class","btn tpi-btn tpi-primary float-start me-3",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","tpi-btn","tpi-primary","float-start",3,"click"],["position","top-left"],["icon","pi pi-exclamation-triangle","styleClass","cHeader cContent cIcon"],["cd",""],["pTemplate","footer"],["rowspan","2","scope","col",2,"width","5%"],["rowspan","2","scope","col"],["rowspan","2","scope","col",2,"min-width","200px"],["rowspan","2","scope","col",2,"min-width","150px"],["rowspan","2","scope","col",2,"min-width","50px"],["rowspan","2","scope","col",2,"width","3%"],["rowspan","2","scope","col",2,"min-width","250px"],["rowspan","1","scope","col",2,"min-width","200px"],["rowspan","1","scope","col"],[3,"src"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[2,"text-align","center","width","150px"],["pButton","","pRipple","","type","button","icon","pi pi-eye","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-plain",3,"pTooltip","click"],["pButton","","pRipple","","type","button","icon","fa fa-edit","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-plain",3,"pTooltip","click"],["pButton","","pRipple","","type","button","icon","fa fa-trash-alt","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-plain",3,"pTooltip","click"],[4,"ngFor","ngForOf"],[1,"text-danger"],[1,"form-text"],[1,"col-auto"],[1,"noimg"],["type","button",1,"btn","tpi-btn","tpi-primary","float-start","me-3",3,"disabled","click"],[1,"row",2,"justify-content","center"],["type","button","pButton","","icon","pi pi-check",3,"ngStyle","label","click"],["type","button","pButton","","icon","pi pi-times",1,"p-button-secondary",3,"label","click"]],template:function(e,l){1&e&&(t.TgZ(0,"app-container",0),t.NdJ("headerReturn",function(){return l.headerReturn()}),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),t.NdJ("click",function(){return l.changePage("create")}),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.TgZ(7,"div",5)(8,"p-table",6),t.YNc(9,j,31,3,"ng-template",7),t.YNc(10,X,31,32,"ng-template",8),t.YNc(11,K,4,4,"ng-template",9),t.qZA()()(),t.TgZ(12,"div",1)(13,"form",10)(14,"div",2)(15,"div",11)(16,"label"),t._uU(17,"Master ID"),t.qZA(),t.TgZ(18,"label",12),t._uU(19),t.qZA()(),t.TgZ(20,"div",13)(21,"label",14),t._uU(22,"Enable"),t.qZA(),t.TgZ(23,"div",15),t.ynx(24),t.TgZ(25,"div",16),t._UZ(26,"p-radioButton",17),t.TgZ(27,"label",18),t._uU(28,"Y"),t.qZA()(),t.TgZ(29,"div",16),t._UZ(30,"p-radioButton",19),t.TgZ(31,"label",20),t._uU(32,"N"),t.qZA()(),t.BQk(),t.qZA(),t.YNc(33,tt,7,6,"div",21),t.qZA()(),t.TgZ(34,"div",2)(35,"div",13)(36,"label",22),t._uU(37,"Timeout(ms)"),t.qZA(),t._UZ(38,"input",23),t.YNc(39,et,13,12,"div",21),t.qZA(),t.TgZ(40,"div",13)(41,"label",24),t._uU(42,"Policy"),t.qZA(),t.TgZ(43,"div",15),t.ynx(44),t.TgZ(45,"div",16),t._UZ(46,"p-radioButton",25),t.TgZ(47,"label",26),t._uU(48,"Sequentially"),t.qZA()(),t.TgZ(49,"div",16),t._UZ(50,"p-radioButton",27),t.TgZ(51,"label",28),t._uU(52,"Random"),t.qZA()(),t.BQk(),t.qZA(),t.YNc(53,lt,7,6,"div",21),t.qZA()(),t.TgZ(54,"div",2)(55,"div",3)(56,"label",29),t._uU(57,"Approval Result Mail"),t.qZA(),t.TgZ(58,"div",30),t._UZ(59,"textarea",31),t.qZA(),t.YNc(60,at,4,3,"div",21),t.qZA()(),t.TgZ(61,"div",2)(62,"div",3)(63,"label",32),t._uU(64,"Page Title"),t.qZA(),t._UZ(65,"input",33),t.YNc(66,nt,4,3,"div",21),t.qZA()(),t.TgZ(67,"div",2)(68,"div",34)(69,"label",35),t._uU(70,"Icon"),t.qZA(),t.TgZ(71,"div",36)(72,"div",37)(73,"button",38),t.NdJ("click",function(){return l.openFileBrowser()}),t._uU(74),t.ALo(75,"translate"),t.qZA()(),t.TgZ(76,"div",39),t.YNc(77,ot,3,3,"button",40),t.qZA(),t.TgZ(78,"div",41)(79,"input",42),t.NdJ("change",function(s){return l.fileChange(s.target.files)}),t.qZA()()()()(),t.TgZ(80,"div",2),t.YNc(81,it,2,1,"div",43),t.YNc(82,rt,1,0,"div",44),t.qZA(),t.TgZ(83,"div",45),t._UZ(84,"app-ldap-data-list",46),t.qZA(),t.TgZ(85,"div",2)(86,"div",47),t.YNc(87,st,3,4,"button",48),t.YNc(88,pt,3,4,"button",48),t.TgZ(89,"button",49),t.NdJ("click",function(){return l.changePage("query")}),t._uU(90),t.ALo(91,"translate"),t.qZA()()()()()(),t._UZ(92,"p-toast",50),t.TgZ(93,"p-confirmDialog",51,52),t.YNc(95,ut,5,8,"ng-template",53),t.qZA()),2&e&&(t.Q6J("title",l.currentTitle)("isDefault",1==l.pageNum),t.xp6(1),t.Q6J("hidden",1!==l.pageNum),t.xp6(4),t.Oqu(t.lcZ(6,30,"button.create")),t.xp6(3),t.Akn(t.DdM(36,ct)),t.Q6J("columns",l.cols)("value",l.dataList),t.xp6(4),t.Q6J("hidden",2!==l.pageNum),t.xp6(1),t.Q6J("formGroup",l.form),t.xp6(2),t.Q6J("hidden","create"==l.currentAction),t.xp6(4),t.Oqu(null==l.idpInfoDetail?null:l.idpInfoDetail.masterId),t.xp6(14),t.Q6J("ngIf",(null==l.status?null:l.status.invalid)&&((null==l.status?null:l.status.dirty)||(null==l.status?null:l.status.touched))),t.xp6(6),t.Q6J("ngIf",(null==l.ldapTimeout?null:l.ldapTimeout.invalid)&&((null==l.ldapTimeout?null:l.ldapTimeout.dirty)||(null==l.ldapTimeout?null:l.ldapTimeout.touched))),t.xp6(14),t.Q6J("ngIf",(null==l.policy?null:l.policy.invalid)&&((null==l.policy?null:l.policy.dirty)||(null==l.policy?null:l.policy.touched))),t.xp6(7),t.Q6J("ngIf",(null==l.approvalResultMail?null:l.approvalResultMail.invalid)&&((null==l.approvalResultMail?null:l.approvalResultMail.dirty)||(null==l.approvalResultMail?null:l.approvalResultMail.touched))),t.xp6(6),t.Q6J("ngIf",(null==l.pageTitle?null:l.pageTitle.invalid)&&((null==l.pageTitle?null:l.pageTitle.dirty)||(null==l.pageTitle?null:l.pageTitle.touched))),t.xp6(5),t.Q6J("hidden","detail"==l.currentAction),t.xp6(3),t.Oqu(t.lcZ(75,32,"chs_file")),t.xp6(3),t.Q6J("ngIf",l._fileSrc),t.xp6(4),t.Q6J("ngIf",l._fileSrc),t.xp6(1),t.Q6J("ngIf",!l._fileSrc),t.xp6(2),t.Q6J("action",l.currentAction),t.xp6(3),t.Q6J("ngIf","create"==l.currentAction),t.xp6(1),t.Q6J("ngIf","update"==l.currentAction),t.xp6(2),t.Oqu(t.lcZ(91,34,"button.return_to_list")),t.xp6(2),t.Akn(t.DdM(37,mt)),t.xp6(1),t.Akn(t.DdM(38,gt)))},directives:[L.e,N.iA,v.jx,x.O5,R.Hq,w.u,x.sg,p._Y,p.JL,p.sg,B.EU,p.JJ,p.u,p.wV,p.Fj,k.g,H,V.FN,E.Q,x.PC],pipes:[I.X$],styles:[".noimg[_ngcontent-%COMP%]{background-color:#ededed;border:2px solid #dedede;border-radius:5px;margin-left:20px;min-width:50px;min-height:50px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background:#F6F6F6}"]}),n})(),canActivate:[T.u6]}];let ft=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[o.Bz.forChild(_t)],o.Bz]}),n})();var vt=r(78555),ht=r(31890);let Zt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[T.u6],imports:[[x.ez,ft,vt.W,ht.m,T.DL,p.UX,p.u5]]}),n})()},63710:(U,Z,r)=>{r.d(Z,{e:()=>t});var o=r(87587),T=r(69808),_=r(51062);function y(g,h){if(1&g&&(o.TgZ(0,"div")(1,"h3",9),o._uU(2),o.ALo(3,"translate"),o.qZA()()),2&g){const c=o.oxw();o.xp6(2),o.Oqu(o.lcZ(3,1,c.title))}}function p(g,h){if(1&g){const c=o.EpF();o.TgZ(0,"div",10)(1,"button",11),o.NdJ("click",function(){return o.CHM(c),o.oxw().return()}),o._UZ(2,"i",12),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.TgZ(5,"span",13),o._uU(6),o.qZA(),o.TgZ(7,"span",14),o._uU(8),o.qZA()()}if(2&g){const c=o.oxw();o.xp6(3),o.hij(" ",o.lcZ(4,3,"button.return_to_list")," "),o.xp6(3),o.hij("",c.getHead()," /"),o.xp6(2),o.Oqu(c.getTail())}}const D=[[["","center-view","center"]],"*"],v=["[center-view=center]","*"];let t=(()=>{class g{constructor(){this.title="",this.isDefault=!0,this.headerReturn=new o.vpe}ngOnInit(){}return(){this.headerReturn.emit(null)}getHead(){const c=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return c.pop(),c.join(" / ")}getTail(){const c=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return c[c.length-1]}}return g.\u0275fac=function(c){return new(c||g)},g.\u0275cmp=o.Xpm({type:g,selectors:[["app-container"]],inputs:{title:"title",isDefault:"isDefault"},outputs:{headerReturn:"headerReturn"},ngContentSelectors:v,decls:11,vars:2,consts:[[1,"container-fluid","h-100"],[1,"row","position-relative",2,"height","calc(100% - 40px - 0.5rem)"],[1,"col"],[2,"margin-bottom","0.5rem"],[4,"ngIf"],["style","text-align: right",4,"ngIf"],[1,"col","d-flex","justify-content-center"],[1,"my-0","mb-2"],[1,"p-2"],["id","content",1,"page-title"],[2,"text-align","right"],["type","button","icon","",1,"btn","float-start","tpi-header-return",3,"click"],[1,"fas","fa-arrow-left",2,"margin-right","5px"],[1,"mb-0",2,"font-size","0.8rem","color","#666464"],[1,"mb-0",2,"font-size","0.8rem","color","#ff6e38","font-weight","bold"]],template:function(c,b){1&c&&(o.F$t(D),o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),o.YNc(4,y,4,3,"div",4),o.YNc(5,p,9,5,"div",5),o.TgZ(6,"div",6),o.Hsn(7),o.qZA()(),o._UZ(8,"hr",7),o.Hsn(9,1),o._UZ(10,"div",8),o.qZA()()()),2&c&&(o.xp6(4),o.Q6J("ngIf",b.isDefault),o.xp6(1),o.Q6J("ngIf",!b.isDefault))},directives:[T.O5],pipes:[_.X$],styles:[".card.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:400;color:#5a5541}"]}),g})()},86347:(U,Z,r)=>{r.d(Z,{DL:()=>o.D,u6:()=>_.u});var o=r(81233),_=(r(45240),r(92718));r(45682)}}]);