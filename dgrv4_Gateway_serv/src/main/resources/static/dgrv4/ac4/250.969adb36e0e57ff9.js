"use strict";(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[250],{80250:(Ct,g,a)=>{a.r(g),a.d(g,{Np0304Module:()=>Lt});var r=a(69808),b=a(88893),Z=a(24783),s=a(93075),A=a(86347),d=a(99291),f=a(15861),x=a(14525),T=a(57553),t=a(87587),v=a(56435),N=a(45682),L=a(71330),C=a(22734),y=a(59783),w=a(1955),K=a(63710),q=a(23099),D=a(40845),k=a(4119),O=a(55069),U=a(17773),R=a(51062);const F=["openApiKeyForm"];function I(i,p){1&i&&t._UZ(0,"col"),2&i&&t.Udp("width",p.$implicit.width)}function J(i,p){if(1&i&&(t.TgZ(0,"colgroup"),t.YNc(1,I,1,2,"col",23),t.qZA(),t.TgZ(2,"colgroup",24),t._uU(3),t.ALo(4,"translate"),t.qZA()),2&i){const e=p.$implicit;t.xp6(1),t.Q6J("ngForOf",e),t.xp6(2),t.Oqu(t.lcZ(4,2,"action"))}}function $(i,p){if(1&i&&(t.TgZ(0,"th",27),t._uU(1),t.qZA()),2&i){const e=p.$implicit;t.xp6(1),t.hij(" ",e.header," ")}}function Y(i,p){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,$,2,1,"th",25),t.TgZ(2,"th",26),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&i){const e=p.$implicit;t.xp6(1),t.Q6J("ngForOf",e),t.xp6(2),t.hij("",t.lcZ(4,2,"action")," ")}}function B(i,p){if(1&i&&(t.TgZ(0,"td")(1,"span"),t._uU(2),t.qZA()()),2&i){const e=p.$implicit,n=t.oxw().$implicit;t.Udp("width",e.width),t.xp6(2),t.hij(" ",n[e.field]," ")}}function Q(i,p){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.YNc(1,B,3,3,"td",23),t.TgZ(2,"td",28)(3,"button",29),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).viewClientOpenApiList(l)}),t.ALo(4,"translate"),t.qZA()()()}if(2&i){const e=p.columns;t.xp6(1),t.Q6J("ngForOf",e),t.xp6(2),t.Q6J("pTooltip",t.lcZ(4,2,"button.detail"))}}function S(i,p){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",30)(2,"span",31),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).moreClientList()}),t._uU(6),t.ALo(7,"translate"),t._UZ(8,"i",33),t.qZA()()()}if(2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.uIk("colspan",e.length+1),t.xp6(2),t.AsE("",t.lcZ(4,4,"row_count"),": ",n.clientListRowcount,""),t.xp6(3),t.hij("",t.lcZ(7,6,"button.more")," ")}}function P(i,p){if(1&i&&t.YNc(0,S,9,8,"tr",14),2&i){const e=t.oxw(2);t.Q6J("ngIf",e.clientListRowcount)}}function E(i,p){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i){const e=p.$implicit;t.xp6(1),t.uIk("colspan",e.length+1),t.xp6(1),t.hij(" ",t.lcZ(3,2,"no_rec")," ")}}const m=function(){return{"word-break":"break-word"}};function M(i,p){if(1&i&&(t.TgZ(0,"p-table",17),t.YNc(1,J,5,4,"ng-template",18),t.YNc(2,Y,5,4,"ng-template",19),t.YNc(3,Q,5,4,"ng-template",20),t.YNc(4,P,1,1,"ng-template",21),t.YNc(5,E,4,4,"ng-template",22),t.qZA()),2&i){const e=t.oxw();t.Akn(t.DdM(4,m)),t.Q6J("columns",e.clientListCols)("value",e.clientList)}}function j(i,p){1&i&&t._UZ(0,"col"),2&i&&t.Udp("width",p.$implicit.width)}function H(i,p){if(1&i&&(t.TgZ(0,"colgroup"),t.YNc(1,j,1,2,"col",23),t.qZA(),t.TgZ(2,"colgroup",35),t._uU(3),t.ALo(4,"translate"),t.qZA()),2&i){const e=p.$implicit;t.xp6(1),t.Q6J("ngForOf",e),t.xp6(2),t.Oqu(t.lcZ(4,2,"action"))}}function z(i,p){if(1&i&&(t.TgZ(0,"th",27),t._uU(1),t.qZA()),2&i){const e=p.$implicit;t.xp6(1),t.hij(" ",e.header," ")}}function G(i,p){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,z,2,1,"th",25),t.TgZ(2,"th",36),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&i){const e=p.$implicit;t.xp6(1),t.Q6J("ngForOf",e),t.xp6(2),t.hij("",t.lcZ(4,2,"action")," ")}}function V(i,p){if(1&i&&(t.TgZ(0,"td")(1,"span"),t._uU(2),t.qZA()()),2&i){const e=p.$implicit,n=t.oxw().$implicit;t.Udp("width",e.width),t.xp6(2),t.hij(" ",n[e.field]," ")}}function X(i,p){if(1&i){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).applyOpenApiKey("update",o)}),t.ALo(1,"translate"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("disabled",0==e.canCreate)("pTooltip",t.lcZ(1,2,"button.change"))}}function W(i,p){if(1&i){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).applyOpenApiKey("revoke",o)}),t.ALo(1,"translate"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("disabled",0==e.canCreate)("pTooltip",t.lcZ(1,2,"button.revoke"))}}function tt(i,p){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.YNc(1,V,3,3,"td",23),t.TgZ(2,"td",37)(3,"button",29),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).queryOpenApiKeyDetail(l)}),t.ALo(4,"translate"),t.qZA(),t.YNc(5,X,2,4,"button",38),t.YNc(6,W,2,4,"button",39),t.qZA()()}if(2&i){const e=p.$implicit,n=p.columns;t.xp6(1),t.Q6J("ngForOf",n),t.xp6(2),t.Q6J("pTooltip",t.lcZ(4,4,"button.detail")),t.xp6(2),t.Q6J("ngIf","Y"==e.updateVisiable),t.xp6(1),t.Q6J("ngIf","Y"==e.revokeVisiable)}}function et(i,p){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",30)(2,"span",31),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).moreOpenApiList()}),t._uU(6),t.ALo(7,"translate"),t._UZ(8,"i",33),t.qZA()()()}if(2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.uIk("colspan",e.length+1),t.xp6(2),t.AsE("",t.lcZ(4,4,"row_count"),": ",n.openApiKeyListRowcount,""),t.xp6(3),t.hij("",t.lcZ(7,6,"button.more")," ")}}function it(i,p){if(1&i&&t.YNc(0,et,9,8,"tr",14),2&i){const e=t.oxw(2);t.Q6J("ngIf",e.openApiKeyListRowcount)}}function nt(i,p){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i){const e=p.$implicit;t.xp6(1),t.uIk("colspan",e.length+1),t.xp6(1),t.hij(" ",t.lcZ(3,2,"no_rec")," ")}}function ot(i,p){if(1&i&&(t.TgZ(0,"p-table",34),t.YNc(1,H,5,4,"ng-template",18),t.YNc(2,G,5,4,"ng-template",19),t.YNc(3,tt,7,6,"ng-template",20),t.YNc(4,it,1,1,"ng-template",21),t.YNc(5,nt,4,4,"ng-template",22),t.qZA()),2&i){const e=t.oxw();t.Akn(t.DdM(4,m)),t.Q6J("columns",e.openApiKeyListCols)("value",e.openApiKeyList)}}function pt(i,p){1&i&&t._UZ(0,"col"),2&i&&t.Udp("width",p.$implicit.width)}function lt(i,p){if(1&i&&(t.TgZ(0,"colgroup"),t.YNc(1,pt,1,2,"col",23),t.qZA()),2&i){const e=p.$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}function at(i,p){if(1&i&&(t.TgZ(0,"th",27),t._uU(1),t.qZA()),2&i){const e=p.$implicit;t.xp6(1),t.hij(" ",e.header," ")}}function ct(i,p){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,at,2,1,"th",25),t.qZA()),2&i){const e=p.$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}function st(i,p){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n[e.field]," ")}}function _t(i,p){1&i&&(t.TgZ(0,"span"),t._uU(1,"\uff0c"),t.qZA())}function rt(i,p){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,_t,2,0,"span",14),t.qZA()),2&i){const e=p.$implicit,n=p.index,o=t.oxw(2).$implicit,l=t.oxw().$implicit,c=t.oxw(3);t.xp6(1),t.hij(" ",e.value," "),t.xp6(1),t.Q6J("ngIf",c.checkLength(l[o.field],n))}}function ut(i,p){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,rt,3,2,"span",46),t.ALo(2,"keyvalue"),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,n[e.field]))}}function dt(i,p){if(1&i){const e=t.EpF();t.TgZ(0,"span")(1,"a",47),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit;return t.oxw(3).downloadFile(o.filePath,o.fileName)}),t._uU(2),t.qZA()()}if(2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit;t.xp6(2),t.hij(" ",n[e.field]," ")}}function mt(i,p){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,st,2,1,"span",14),t.YNc(2,ut,3,3,"div",14),t.YNc(3,dt,3,1,"span",14),t.qZA()),2&i){const e=p.$implicit;t.Udp("width",e.width),t.xp6(1),t.Q6J("ngIf","themeDatas"!=e.field&&"fileName"!=e.field),t.xp6(1),t.Q6J("ngIf","themeDatas"==e.field),t.xp6(1),t.Q6J("ngIf","fileName"==e.field)}}function ht(i,p){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,mt,4,5,"td",23),t.qZA()),2&i){const e=p.columns;t.xp6(1),t.Q6J("ngForOf",e)}}function gt(i,p){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",30)(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).moreOpenApiKeyDetailData()}),t._uU(6),t.ALo(7,"translate"),t._UZ(8,"i",33),t.qZA()()()}if(2&i){const e=t.oxw().$implicit,n=t.oxw(3);t.xp6(1),t.uIk("colspan",e.length),t.xp6(2),t.AsE("",t.lcZ(4,4,"row_count"),": ",n.openApiKeyDetailRowcount,""),t.xp6(3),t.hij("",t.lcZ(7,6,"button.more")," ")}}function At(i,p){if(1&i&&t.YNc(0,gt,9,8,"tr",14),2&i){const e=t.oxw(3);t.Q6J("ngIf",e.openApiKeyDetailRowcount)}}function ft(i,p){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i){const e=p.$implicit;t.xp6(1),t.uIk("colspan",e.length),t.xp6(1),t.hij(" ",t.lcZ(3,2,"no_rec")," ")}}function yt(i,p){if(1&i&&(t.TgZ(0,"p-table",45),t.YNc(1,lt,2,1,"ng-template",18),t.YNc(2,ct,2,1,"ng-template",19),t.YNc(3,ht,2,1,"ng-template",20),t.YNc(4,At,1,1,"ng-template",21),t.YNc(5,ft,4,4,"ng-template",22),t.qZA()),2&i){const e=t.oxw(2);t.Akn(t.DdM(4,m)),t.Q6J("columns",e.openApiKeyDetailCols)("value",e.openApiKeyDetailData.dataList)}}function bt(i,p){if(1&i&&(t.TgZ(0,"form")(1,"div",8)(2,"div",42)(3,"label",43),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._uU(6,"\uff1a "),t.TgZ(7,"label"),t._uU(8),t.qZA()(),t.TgZ(9,"div",42)(10,"label",43),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._uU(13,"\uff1a "),t.TgZ(14,"label"),t._uU(15),t.qZA()(),t.TgZ(16,"div",42)(17,"label",43),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._uU(20,"\uff1a "),t.TgZ(21,"label"),t._uU(22),t.qZA()()(),t.TgZ(23,"div",8)(24,"div",9)(25,"label",43),t._uU(26,"Open API Key"),t.qZA(),t._uU(27,"\uff1a "),t.TgZ(28,"label"),t._uU(29),t.qZA()()(),t.TgZ(30,"div",8)(31,"div",9)(32,"label",43),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._uU(35,"\uff1a "),t.TgZ(36,"label"),t._uU(37),t.qZA()()(),t.TgZ(38,"div",8)(39,"div",9)(40,"label",43),t._uU(41,"Secret Key"),t.qZA(),t._uU(42,"\uff1a "),t.TgZ(43,"label"),t._uU(44),t.qZA()()(),t.TgZ(45,"div",8)(46,"div",42)(47,"label",43),t._uU(48),t.ALo(49,"translate"),t.qZA(),t._uU(50,"\uff1a "),t.TgZ(51,"label"),t._uU(52),t.qZA()(),t.TgZ(53,"div",42)(54,"label",43),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._uU(57,"\uff1a "),t.TgZ(58,"label"),t._uU(59),t.qZA()(),t.TgZ(60,"div",42)(61,"label",43),t._uU(62),t.ALo(63,"translate"),t.qZA(),t._uU(64,"\uff1a "),t.TgZ(65,"label"),t._uU(66),t.qZA()()(),t.TgZ(67,"div",8)(68,"div",42)(69,"label",43),t._uU(70),t.ALo(71,"translate"),t.qZA(),t._uU(72,"\uff1a "),t.TgZ(73,"label"),t._uU(74),t.qZA()(),t.TgZ(75,"div",42)(76,"label",43),t._uU(77),t.ALo(78,"translate"),t.qZA(),t._uU(79,"\uff1a "),t.TgZ(80,"label"),t._uU(81),t.qZA()(),t.TgZ(82,"div",42)(83,"label",43),t._uU(84),t.ALo(85,"translate"),t.qZA(),t._uU(86,"\uff1a "),t.TgZ(87,"label"),t._uU(88),t.qZA()()(),t.TgZ(89,"div",8)(90,"div",9)(91,"label",43),t._uU(92),t.ALo(93,"translate"),t.qZA(),t._uU(94,"\uff1a "),t.YNc(95,yt,6,5,"p-table",44),t.qZA()()()),2&i){const e=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,24,"client_id")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.clientId),t.xp6(3),t.Oqu(t.lcZ(12,26,"client_name")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.clientName),t.xp6(3),t.Oqu(t.lcZ(19,28,"client_alias")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.clientAlias),t.xp6(7),t.Oqu(e.openApiKeyDetailData.openApiKey),t.xp6(4),t.Oqu(t.lcZ(34,30,"open_api_key_alias")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.openApiKeyAlias),t.xp6(7),t.Oqu(e.openApiKeyDetailData.secretKey),t.xp6(4),t.Oqu(t.lcZ(49,32,"status")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.openApiKeyStatusName),t.xp6(3),t.Oqu(t.lcZ(56,34,"times_quota")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.timesQuota),t.xp6(3),t.Oqu(t.lcZ(63,36,"use_quota")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.timesThreshold),t.xp6(4),t.Oqu(t.lcZ(71,38,"create_date")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.createDateTime),t.xp6(3),t.Oqu(t.lcZ(78,40,"expired_date")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.expiredAt),t.xp6(3),t.Oqu(t.lcZ(85,42,"revoked_date")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.revokedAt),t.xp6(4),t.Oqu(t.lcZ(93,44,"auth_api")),t.xp6(3),t.Q6J("ngIf",e.openApiKeyDetailCols)}}function Zt(i,p){if(1&i){const e=t.EpF();t.TgZ(0,"app-open-api-key-form",49,50),t.NdJ("refresh",function(o){return t.CHM(e),t.oxw(2).refreshData(o)}),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("data",e.applyOpenApiKeyDataParams)}}function xt(i,p){if(1&i){const e=t.EpF();t.TgZ(0,"div"),t.YNc(1,Zt,2,1,"app-open-api-key-form",48),t._UZ(2,"br"),t.TgZ(3,"div",15)(4,"div",9)(5,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().changePage("viewClientOpenApiList",!0)}),t._uU(6),t.ALo(7,"translate"),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.applyOpenApiKeyDataParams),t.xp6(5),t.Oqu(t.lcZ(7,2,"button.return_to_list"))}}const Tt=function(){return{marginTop:"60px"}},vt=[{path:"",component:(()=>{class i extends x.H{constructor(e,n,o,l,c,h,u,_){super(e,n),this.fb=o,this.tool=l,this.openApiService=c,this.file=h,this.message=u,this.roleService=_,this.currentTitle=this.title,this.pageNum=1,this.clientListCols=[],this.clientList=new Array,this.clientListRowcount=0,this.applyOpenApiKeyTitle="",this.updateOpenApiKeyTitle="",this.revokeOpenApiKeyTitle="",this.openApiKeyListTitle="",this.openApiKeyListCols=[],this.openApiKeyList=new Array,this.openApiKeyListRowcount=0,this.openApiKeyDetailTitle="",this.openApiKeyDetailCols=[],this.openApiKeyDetailRowcount=0,this.canCreate=!1}ngOnInit(){this.form=this.fb.group({keyword:new s.NI("")}),this.roleService.queryRTMapByUk({txIdList:["DPB0092"]}).subscribe(e=>{this.tool.checkDpSuccess(e.ResHeader)&&(this.canCreate=!!e.RespBody.dataList.find(n=>"DPB0092"===n.txId)&&e.RespBody.dataList.find(n=>"DPB0092"===n.txId).available)}),this.init()}checkLength(e,n){return Object.keys(e).length>1&&n+1!=Object.keys(e).length}init(){var e=this;return(0,f.Z)(function*(){const o=yield e.tool.getDict(["client_id","client_name","client_alias","open_api_key_alias","create_date","expired_date","revoked_date","status","api_name","api_desc","org_name","theme_name","api_doc","button.view","button.detail","button.apply_open_api_key","button.change","button.revoke","button.apply","api_key_list"]);e.clientListCols=[{field:"clientId",header:o.client_id},{field:"clientName",header:o.client_name},{field:"clientAlias",header:o.client_alias}],e.openApiKeyListTitle=`${e.title} > ${o.api_key_list}`,e.openApiKeyListCols=[{field:"clientId",header:o.client_id,width:"15%"},{field:"openApiKey",header:"API Key",width:"25%"},{field:"openApiKeyAlias",header:o.open_api_key_alias,width:"15%"},{field:"createDateTime",header:o.create_date,width:"10%"},{field:"expiredAt",header:o.expired_date,width:"10%"},{field:"revokedAt",header:o.revoked_date,width:"10%"},{field:"openApiKeyStatusName",header:o.status,width:"5%"}],e.openApiKeyDetailTitle=`${e.title} > ${o.api_key_list} > ${o["button.detail"]}`,e.openApiKeyDetailCols=[{field:"apiName",header:o.api_name,width:"15%"},{field:"apiDesc",header:o.api_desc,width:"15%"},{field:"themeDatas",header:o.theme_name,width:"15%"},{field:"orgName",header:o.org_name,width:"15%"},{field:"fileName",header:o.api_doc,width:"15%"}],e.applyOpenApiKeyTitle=`${e.title} > ${o.api_key_list} > ${o["button.apply"]}`,e.updateOpenApiKeyTitle=`${e.title} > ${o.api_key_list} > ${o["button.change"]}`,e.revokeOpenApiKeyTitle=`${e.title} > ${o.api_key_list} > ${o["button.revoke"]}`,e.clientList=[],e.clientListRowcount=e.clientList.length,e.currentClient={},e.openApiService.queryClientListByRegStatusLike_ignore1298({keyword:e.keyword.value,regStatus:"2"}).subscribe(c=>{e.tool.checkDpSuccess(c.ResHeader)&&(e.pageNum=1,e.clientList=c.RespBody.dataList,e.clientListRowcount=e.clientList.length)})})()}queryClientList(){this.clientList=[],this.clientListRowcount=this.clientList.length,this.currentClient={},this.openApiService.queryClientListByRegStatusLike({keyword:this.keyword.value,regStatus:"2"}).subscribe(n=>{this.tool.checkDpSuccess(n.ResHeader)&&(this.pageNum=1,this.clientList=n.RespBody.dataList,this.clientListRowcount=this.clientList.length)})}moreClientList(){this.openApiService.queryClientListByRegStatusLike({clientId:this.clientList[this.clientList.length-1].clientId,keyword:this.keyword.value,regStatus:"2"}).subscribe(n=>{this.tool.checkDpSuccess(n.ResHeader)&&(this.clientList=this.clientList.concat(n.RespBody.dataList),this.clientListRowcount=this.clientList.length)})}viewClientOpenApiList(e){this.currentClient=e,this.openApiKeyList=[],this.openApiKeyListRowcount=this.openApiKeyList.length,this.openApiService.queryOpenApiKeyByClientId({clientId:this.currentClient.clientId}).subscribe(o=>{this.currentTitle=this.openApiKeyListTitle,this.pageNum=2,this.tool.checkDpSuccess(o.ResHeader)&&(this.openApiKeyList=o.RespBody.dataList,this.openApiKeyListRowcount=this.openApiKeyList.length)})}moreOpenApiList(){var e;let n={openApiKeyId:this.openApiKeyList[this.openApiKeyList.length-1].openApiKeyId,clientId:null===(e=this.currentClient)||void 0===e?void 0:e.clientId};this.openApiService.queryOpenApiKeyByClientId(n).subscribe(o=>{this.tool.checkDpSuccess(o.ResHeader)&&(this.openApiKeyList=this.openApiKeyList.concat(o.RespBody.dataList),this.openApiKeyListRowcount=this.openApiKeyList.length)})}applyOpenApiKey(e,n){var o;let l={clientId:null===(o=this.currentClient)||void 0===o?void 0:o.clientId,encodeReqSubtype:this.tool.Base64Encoder(this.tool.BcryptEncoder("OPEN_API_KEY_APPLICA"))+",0"};switch(e){case"create":l.encodeReqSubtype=this.tool.Base64Encoder(this.tool.BcryptEncoder("OPEN_API_KEY_APPLICA"))+",0";break;case"update":l.encodeReqSubtype=this.tool.Base64Encoder(this.tool.BcryptEncoder("OPEN_API_KEY_UPDATE"))+",1",l.openApiKeyId=null==n?void 0:n.openApiKeyId;break;case"revoke":l.encodeReqSubtype=this.tool.Base64Encoder(this.tool.BcryptEncoder("OPEN_API_KEY_REVOKE"))+",2",l.openApiKeyId=null==n?void 0:n.openApiKeyId}this.openApiService.writeOpenApiKeyReq(l).subscribe(c=>{if(this.tool.checkDpSuccess(c.ResHeader)){switch(e){case"create":this.currentTitle=this.applyOpenApiKeyTitle;break;case"update":this.currentTitle=this.updateOpenApiKeyTitle;break;case"revoke":this.currentTitle=this.revokeOpenApiKeyTitle}this.pageNum=4,this.applyOpenApiKeyDataParams={operate:T.mi.create,data:c.RespBody}}})}queryOpenApiKeyDetail(e){this.openApiKeyDetailData={},this.openApiService.queryOpenApiKeyDetailByPk({openApiKeyId:e.openApiKeyId}).subscribe(o=>{this.tool.checkDpSuccess(o.ResHeader)&&(this.openApiKeyDetailData=o.RespBody,this.openApiKeyDetailRowcount=this.openApiKeyDetailData.dataList.length,this.currentTitle=this.openApiKeyDetailTitle,this.pageNum=3)})}moreOpenApiKeyDetailData(){var e,n,o;let l={apiKey:null===(e=this.openApiKeyDetailData)||void 0===e?void 0:e.dataList[this.openApiKeyDetailData.dataList.length-1].apiKey,moduleName:null===(n=this.openApiKeyDetailData)||void 0===n?void 0:n.dataList[this.openApiKeyDetailData.dataList.length-1].moduleName,openApiKeyId:null===(o=this.openApiKeyDetailData)||void 0===o?void 0:o.openApiKeyId};this.openApiService.queryOpenApiKeyDetailByPk(l).subscribe(c=>{this.tool.checkDpSuccess(c.ResHeader)&&(this.openApiKeyDetailData.dataList=this.openApiKeyDetailData.dataList.concat(c.RespBody.dataList),this.openApiKeyDetailRowcount=this.openApiKeyDetailData.dataList.length)})}downloadFile(e,n){this.file.downloadFile({filePath:e}).subscribe(l=>{const c=new FileReader;c.onloadend=function(){const h=new File([l],n),u=window.URL.createObjectURL(h),_=document.createElement("a");document.body.appendChild(_),_.setAttribute("style","display: none"),_.href=u,_.download=n,_.click(),window.URL.revokeObjectURL(u),_.remove()},c.readAsText(l)})}refreshData(e){var n=this;return(0,f.Z)(function*(){const l=yield n.tool.getDict(["message.save","message.requisition.open_api_key","message.success"]);n.message.add({severity:"success",summary:`${l["message.save"]} ${l["message.requisition.open_api_key"]}`,detail:`${l["message.save"]} ${l["message.success"]}!`}),n.viewClientOpenApiList(n.currentClient)})()}changePage(e,n){switch(e){case"queryClientList":this.currentTitle=this.title,this.pageNum=1;break;case"viewClientOpenApiList":this.currentTitle=this.openApiKeyListTitle,this.pageNum=2}n&&this._openApiKeyForm.clearData()}headerReturn(){3==this.pageNum?this.changePage("viewClientOpenApiList",!1):4==this.pageNum?this.changePage("viewClientOpenApiList",!0):this.changePage("queryClientList",!1)}get keyword(){return this.form.get("keyword")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(d.gz),t.Y36(v.W),t.Y36(s.qu),t.Y36(N.g),t.Y36(L.l),t.Y36(C.I),t.Y36(y.ez),t.Y36(w.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-np0304"]],viewQuery:function(e,n){if(1&e&&t.Gf(F,5),2&e){let o;t.iGM(o=t.CRH())&&(n._openApiKeyForm=o.first)}},features:[t.qOj],decls:38,vars:32,consts:[[3,"title","isDefault","headerReturn"],[3,"hidden"],[3,"formGroup","ngSubmit"],[1,"form-group","row","col-12"],[1,"p-input-icon-right",2,"width","40vw"],[1,"pi","pi-search","tpi-i-search",3,"click"],["type","search","id","keyword","formControlName","keyword",1,"form-control","tpi-i-input",3,"placeholder"],["selectionMode","single","styleClass","p-datatable-striped","responsiveLayout","scroll",3,"columns","value","style",4,"ngIf"],[1,"form-group","row"],[1,"col-12","col-xl-12","col-lg-12"],["type","button",1,"btn","tpi-btn","tpi-second","loat-left","mr-3",3,"disabled","click"],["styleClass","p-datatable-striped","selectionMode","single","responsiveLayout","scroll",3,"columns","value","style",4,"ngIf"],["type","button",1,"btn","tpi-btn","tpi-primary","float-left","mr-3",3,"click"],[1,"card","card-body","bg-light","mt-3"],[4,"ngIf"],[1,"row"],["position","top-left"],["selectionMode","single","styleClass","p-datatable-striped","responsiveLayout","scroll",3,"columns","value"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],[3,"width",4,"ngFor","ngForOf"],[2,"width","50px"],["scope","col",4,"ngFor","ngForOf"],["scope","col",2,"width","50px"],["scope","col"],[2,"text-align","center","width","50px"],["pButton","","pRipple","","type","button","icon","pi pi-eye","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-plain",3,"pTooltip","click"],[2,"color","#b7b7b7"],[2,"vertical-align","middle"],["type","button",1,"btn","tpi-header-return",3,"click"],[1,"fas","fa-angle-double-right",2,"margin-left","5px"],["styleClass","p-datatable-striped","selectionMode","single","responsiveLayout","scroll",3,"columns","value"],[2,"width","150px"],["scope","col",2,"width","150px"],[2,"text-align","center","width","150px"],["pButton","","pRipple","","type","button","icon","fa fa-edit","class","p-button-rounded p-button-text p-button-plain","tooltipPosition","top",3,"disabled","pTooltip","click",4,"ngIf"],["pButton","","pRipple","","type","button","icon","fa fa-trash-alt","class","p-button-rounded p-button-text p-button-plain","tooltipPosition","top",3,"disabled","pTooltip","click",4,"ngIf"],["pButton","","pRipple","","type","button","icon","fa fa-edit","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-plain",3,"disabled","pTooltip","click"],["pButton","","pRipple","","type","button","icon","fa fa-trash-alt","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-plain",3,"disabled","pTooltip","click"],[1,"col-4","col-xl-4","col-lg-4"],[1,"control-label"],["styleClass","p-datatable-striped","selectionMode","single",3,"columns","value","style",4,"ngIf"],["styleClass","p-datatable-striped","selectionMode","single",3,"columns","value"],[4,"ngFor","ngForOf"],["href","javascript:void(0)",3,"click"],[3,"data","refresh",4,"ngIf"],[3,"data","refresh"],["openApiKeyForm",""]],template:function(e,n){1&e&&(t.TgZ(0,"app-container",0),t.NdJ("headerReturn",function(){return n.headerReturn()}),t.TgZ(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return n.queryClientList()}),t.TgZ(3,"div",3)(4,"span",4)(5,"i",5),t.NdJ("click",function(){return n.queryClientList()}),t.qZA(),t._UZ(6,"input",6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA()()(),t._UZ(10,"hr"),t.YNc(11,M,6,5,"p-table",7),t.qZA(),t.TgZ(12,"div",1)(13,"form")(14,"div",8)(15,"div",9)(16,"button",10),t.NdJ("click",function(){return n.applyOpenApiKey("create")}),t._uU(17),t.ALo(18,"translate"),t.qZA()()(),t._UZ(19,"hr"),t.YNc(20,ot,6,5,"p-table",11),t._UZ(21,"br"),t.TgZ(22,"div",8)(23,"div",9)(24,"button",12),t.NdJ("click",function(){return n.changePage("queryClientList",!1)}),t._uU(25),t.ALo(26,"translate"),t.qZA()()()()(),t.TgZ(27,"div",1)(28,"div",13),t.YNc(29,bt,96,46,"form",14),t.qZA(),t._UZ(30,"br"),t.TgZ(31,"div",15)(32,"div",9)(33,"button",12),t.NdJ("click",function(){return n.changePage("viewClientOpenApiList",!1)}),t._uU(34),t.ALo(35,"translate"),t.qZA()()()(),t.YNc(36,xt,8,4,"div",14),t.qZA(),t._UZ(37,"p-toast",16)),2&e&&(t.Q6J("title",n.currentTitle)("isDefault",1==n.pageNum),t.xp6(1),t.Q6J("hidden",1!=n.pageNum),t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(4),t.cQ8("placeholder","",t.lcZ(7,19,"client_id"),"\u3001",t.lcZ(8,21,"client_name"),"\u3001",t.lcZ(9,23,"client_alias"),""),t.xp6(5),t.Q6J("ngIf",n.clientListCols),t.xp6(1),t.Q6J("hidden",2!=n.pageNum),t.xp6(4),t.Q6J("disabled",0==n.canCreate),t.xp6(1),t.Oqu(t.lcZ(18,25,"button.apply")),t.xp6(3),t.Q6J("ngIf",n.openApiKeyListCols),t.xp6(5),t.Oqu(t.lcZ(26,27,"button.return_to_list")),t.xp6(2),t.Q6J("hidden",3!=n.pageNum),t.xp6(2),t.Q6J("ngIf",n.openApiKeyDetailData),t.xp6(5),t.Oqu(t.lcZ(35,29,"button.return_to_list")),t.xp6(2),t.Q6J("ngIf",4==n.pageNum),t.xp6(1),t.Akn(t.DdM(31,Tt)))},directives:[K.e,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,r.O5,q.iA,y.jx,r.sg,D.Hq,k.u,s.F,O.V,U.FN],pipes:[R.X$,r.Nd],styles:[""]}),i})(),canActivate:[A.u6]}];let Nt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.Bz.forChild(vt)],d.Bz]}),i})(),Lt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[A.u6],imports:[[r.ez,Nt,b.W,Z.m,s.UX,s.u5]]}),i})()}}]);